(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[100],{942:(e,t,o)=>{"use strict";function n(){let e=window;if(void 0!==e.__TAURI__||void 0!==e.__TAURI_INTERNALS__||window.navigator.userAgent.includes("Tauri"))return!0;try{if(e.location&&"tauri:"===e.location.protocol)return!0}catch(e){}return"file:"===window.location.protocol||"tauri:"===window.location.protocol}function a(){return{isTauri:n(),isDev:!1,isBuild:!0,userAgent:window.navigator.userAgent,platform:window.navigator.platform}}async function l(){if(n())return!0;try{let{invoke:e}=await o.e(379).then(o.bind(o,7379));if(e)return await e("greet"),!0}catch(e){console.warn("Tauri API test failed:",e)}return!1}async function i(){try{if(await l()){let{invoke:e}=await o.e(379).then(o.bind(o,7379)),{getCurrentWindow:t}=await o.e(381).then(o.bind(o,9381)),n=t();return{invoke:e,currentWindow:n}}}catch(e){console.warn("Failed to import Tauri API:",e)}return{invoke:null,currentWindow:null}}function r(){let e=a();console.log("\uD83D\uDD0D Environment Info:",e),e.isTauri?console.log("✅ Running in Tauri desktop app"):console.log("\uD83C\uDF10 Running in web browser")}o.d(t,{XI:()=>l,cR:()=>a,uL:()=>r,vo:()=>n,xU:()=>i})},1519:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var n=o(6354),a=o(942);let l=()=>{let[e,t]=(0,n.useState)(null),[o,l]=(0,n.useState)(!0),[i,r]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(0,a.uL)(),s()},[]);let s=async()=>{let e=await (0,a.XI)();u(e),console.log("\uD83D\uDD0D Tauri环境检测结果: ".concat(e?"✅ 是":"❌ 否")),await h()},h=async()=>{l(!0);try{let{invoke:e}=await (0,a.xU)();if(!c||!e){console.log("\uD83C\uDF10 Web环境：检查localStorage认证状态");let e=localStorage.getItem("auth_user"),o=localStorage.getItem("auth_token"),n=localStorage.getItem("auth_expires");if(e&&o&&n){let o=parseInt(n);if(Date.now()<o){let o=JSON.parse(e);t(o),r(!0),console.log("✅ Web环境：找到有效的认证数据")}else localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_expires"),console.log("⏰ Web环境：认证数据已过期，已清除")}else console.log("❌ Web环境：未找到认证数据");return}console.log("\uD83D\uDDA5️ Tauri环境：检查本地认证状态");let o=await e("get_auth_data");o?(t(o.user),r(!0),console.log("✅ Tauri环境：找到有效的认证数据")):console.log("❌ Tauri环境：未找到认证数据")}catch(e){console.error("❌ 检查认证状态失败:",e)}finally{l(!1)}},g=async()=>{try{let{invoke:e}=await (0,a.xU)();c&&e?(console.log("\uD83D\uDDA5️ Tauri环境：调用logout命令"),await e("logout")):(console.log("\uD83C\uDF10 Web环境：清除认证数据"),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_expires"))}catch(e){console.error("❌ 登出失败:",e)}finally{t(null),r(!1),console.log("✅ 登出成功"),window.location.href="/login"}};return{user:e,isLoading:o,isAuthenticated:i,isTauriEnv:c,login:e=>{t(e),r(!0)},logout:g,checkAuthStatus:h}}},2803:(e,t,o)=>{"use strict";o.d(t,{c:()=>l});var n=o(8752),a=o(6354);let l=()=>{let e=(0,n.useRouter)(),t=(0,a.useCallback)(t=>{setTimeout(()=>{e.push(t)},0)},[e]);return{navigateTo:t,replace:(0,a.useCallback)(t=>{setTimeout(()=>{e.replace(t)},0)},[e]),back:(0,a.useCallback)(()=>{setTimeout(()=>{e.back()},0)},[e])}}},2960:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var n=o(7770),a=o(8582),l=o(2993),i=o(7710),r=o(2971),c=o(2803),u=o(1519);function s(){let{navigateTo:e}=(0,c.c)(),{logout:t,isAuthenticated:o,user:s}=(0,u.A)();return(0,n.jsxs)(a.B,{gap:"md",p:"lg",children:[(0,n.jsx)(l.h,{order:2,children:"路由测试页面"}),(0,n.jsxs)(i.E,{children:["认证状态: ",o?"已登录":"未登录"]}),s&&(0,n.jsxs)(i.E,{children:["用户: ",s.email]}),(0,n.jsxs)(a.B,{gap:"sm",children:[(0,n.jsx)(r.$,{onClick:()=>e("/"),children:"跳转到主页"}),(0,n.jsx)(r.$,{onClick:()=>e("/login"),children:"跳转到登录页"}),(0,n.jsx)(r.$,{color:"red",onClick:t,children:"退出登录"})]})]})}},2993:(e,t,o)=>{"use strict";o.d(t,{h:()=>f});var n=o(7770);o(6354);var a=o(1793),l=o(3473),i=o(2551),r=o(202),c=o(1651),u=o(8800);let s=["h1","h2","h3","h4","h5","h6"],h=["xs","sm","md","lg","xl"];var g={root:"m_8a5d1357"};let d={order:1},m=(0,a.V)((e,t)=>{let{order:o,size:n,lineClamp:a,textWrap:l}=t,i=function(e,t){let o=void 0!==t?t:"h".concat(e);return s.includes(o)?{fontSize:"var(--mantine-".concat(o,"-font-size)"),fontWeight:"var(--mantine-".concat(o,"-font-weight)"),lineHeight:"var(--mantine-".concat(o,"-line-height)")}:h.includes(o)?{fontSize:"var(--mantine-font-size-".concat(o,")"),fontWeight:"var(--mantine-h".concat(e,"-font-weight)"),lineHeight:"var(--mantine-h".concat(e,"-line-height)")}:{fontSize:(0,u.D)(o),fontWeight:"var(--mantine-h".concat(e,"-font-weight)"),lineHeight:"var(--mantine-h".concat(e,"-line-height)")}}(o||1,n);return{root:{"--title-fw":i.fontWeight,"--title-lh":i.lineHeight,"--title-fz":i.fontSize,"--title-line-clamp":"number"==typeof a?a.toString():void 0,"--title-text-wrap":l}}}),f=(0,c.P9)((e,t)=>{let o=(0,l.Y)("Title",d,e),{classNames:a,className:c,style:u,styles:s,unstyled:h,order:f,vars:w,size:v,variant:p,lineClamp:_,textWrap:S,mod:b,attributes:T,...I}=o,x=(0,i.I)({name:"Title",props:o,classes:g,className:c,style:u,classNames:a,styles:s,unstyled:h,attributes:T,vars:w,varsResolver:m});return[1,2,3,4,5,6].includes(f)?(0,n.jsx)(r.a,{...x("root"),component:"h".concat(f),variant:p,ref:t,mod:[{order:f,"data-line-clamp":"number"==typeof _},b],size:v,...I}):null});f.classes=g,f.displayName="@mantine/core/Title"},4266:(e,t,o)=>{Promise.resolve().then(o.bind(o,2960))},8752:(e,t,o)=>{"use strict";var n=o(7008);o.o(n,"usePathname")&&o.d(t,{usePathname:function(){return n.usePathname}}),o.o(n,"useRouter")&&o.d(t,{useRouter:function(){return n.useRouter}})}},e=>{e.O(0,[155,57,854,162,358],()=>e(e.s=4266)),_N_E=e.O()}]);