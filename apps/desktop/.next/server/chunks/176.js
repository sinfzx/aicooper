"use strict";exports.id=176,exports.ids=[176],exports.modules={490:(a,b,c)=>{c.d(b,{M:()=>o});var d=c(4460);c(36341);var e=c(36332),f=c(57546),g=c(14772),h=c(76751),i=c(39756),j=c(70689),k=c(58740),l=c(10492),m=c(78338),n=c(93709);let o=({title:a,description:b,icon:c,breadcrumbs:o,actions:p,onBack:q,children:r})=>(0,d.jsxs)(e.B,{gap:"lg",p:"md",h:"100%",children:[o&&o.length>0&&(0,d.jsx)(f.B,{separator:">",children:o.map((a,b)=>(0,d.jsxs)(g.M,{href:a.href,size:"sm",c:"dimmed",style:{textDecoration:"none"},children:[0===b&&(0,d.jsx)(m.A,{size:14,style:{marginRight:4}}),a.label]},b))}),(0,d.jsxs)(h.Y,{justify:"space-between",align:"flex-start",children:[(0,d.jsxs)(h.Y,{align:"flex-start",children:[q&&(0,d.jsx)(i.M,{variant:"light",size:"lg",onClick:q,style:{marginTop:4},children:(0,d.jsx)(n.A,{size:18})}),(0,d.jsxs)(h.Y,{align:"flex-start",children:[c&&(0,d.jsx)(j.a,{style:{marginTop:2},children:c}),(0,d.jsxs)(j.a,{children:[(0,d.jsx)(k.h,{order:2,mb:4*!!b,children:a}),b&&(0,d.jsx)(l.E,{c:"dimmed",size:"sm",children:b})]})]})]}),p&&(0,d.jsx)(h.Y,{children:p})]}),(0,d.jsx)(j.a,{style:{flex:1,overflow:"auto"},children:r})]})},10487:(a,b,c)=>{c.d(b,{C:()=>A});var d=c(4460),e=c(36341),f=c(70689),g=c(41055),h=c(1094),i=c(36332),j=c(58740),k=c(10492),l=c(39445),m=c(62765),n=c(76751),o=c(80925),p=c(39756),q=c(89636),r=c(20948),s=c(89086),t=c(61903),u=c(63597),v=c(39324),w=c(15088),x=c(15375),y=c(39129);let z=async()=>null,A=()=>{let[a,b]=(0,e.useState)([]),[c,A]=(0,e.useState)(null),[B,C]=(0,e.useState)([]),[D,E]=(0,e.useState)(""),[F,G]=(0,e.useState)(!1),H=(0,e.useRef)(null);(0,e.useEffect)(()=>{I()},[]),(0,e.useEffect)(()=>{J()},[B]);let I=async()=>{try{let a=await z();if(!a){console.warn("Tauri API not available, using mock data");let a=[{id:"mock-1",name:"Mock OpenAI",provider:"openai",apiKey:"mock-key",baseUrl:void 0,model:"gpt-3.5-turbo",isDefault:!0,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];b(a),A(a[0]);return}let c=await a("get_api_keys");b(c);let d=c.find(a=>a.isDefault&&a.isActive);d?A(d):c.length>0&&A(c[0])}catch(a){console.error("Failed to load API keys:",a)}},J=()=>{H.current?.scrollIntoView({behavior:"smooth"})},K=async()=>{if(!D.trim()||!c||F)return;let a={id:Date.now().toString(),role:"user",content:D.trim(),timestamp:new Date().toISOString()};C(b=>[...b,a]),E(""),G(!0);try{let b,d=await z();if(d){let e=[...B,a].map(a=>({role:a.role,content:a.content}));b=await d("chat_with_ai",{provider:c.provider,apiKey:c.apiKey,model:c.model||"gpt-3.5-turbo",messages:e,baseUrl:c.baseUrl||null})}else await new Promise(a=>setTimeout(a,1e3)),b=`这是一个模拟回复，因为 Tauri API 不可用。您的消息是："${a.content}"`;let e={id:(Date.now()+1).toString(),role:"assistant",content:b,timestamp:new Date().toISOString(),model:c.model};C(a=>[...a,e])}catch(b){console.error("Chat failed:",b);let a={id:(Date.now()+1).toString(),role:"assistant",content:`抱歉，发生了错误：${b}`,timestamp:new Date().toISOString()};C(b=>[...b,a])}finally{G(!1)}};return 0===a.length?(0,d.jsx)(f.a,{p:"lg",children:(0,d.jsx)(g.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,children:(0,d.jsx)(h.o,{children:(0,d.jsxs)(i.B,{align:"center",gap:"md",children:[(0,d.jsx)(u.A,{size:64,color:"var(--mantine-color-gray-5)"}),(0,d.jsx)(j.h,{order:3,ta:"center",children:"需要配置 API Key"}),(0,d.jsx)(k.E,{c:"dimmed",ta:"center",maw:400,children:"请先在 API Key 管理页面添加至少一个 AI 服务提供商的密钥"}),(0,d.jsx)(l.$,{leftSection:(0,d.jsx)(v.A,{size:16}),children:"前往配置"})]})})})}):(0,d.jsxs)(i.B,{h:"100vh",gap:0,children:[(0,d.jsx)(m.t,{p:"md",shadow:"sm",withBorder:!0,children:(0,d.jsxs)(n.Y,{justify:"space-between",children:[(0,d.jsxs)(n.Y,{children:[(0,d.jsx)(w.A,{size:24,color:"var(--mantine-color-blue-6)"}),(0,d.jsx)(j.h,{order:3,children:"AI 聊天"}),(0,d.jsx)(o.l,{placeholder:"选择 API Key",value:c?.id||null,onChange:b=>{A(a.find(a=>a.id===b)||null)},data:a.map(a=>({value:a.id,label:`${a.name} (${a.provider})`})),w:250})]}),(0,d.jsx)(p.M,{variant:"light",color:"red",onClick:()=>{confirm("确定要清除聊天记录吗？")&&C([])},disabled:0===B.length,children:(0,d.jsx)(x.A,{size:16})})]})}),(0,d.jsx)(q.F,{style:{flex:1},p:"md",bg:"gray.0",children:0===B.length?(0,d.jsx)(h.o,{h:"100%",children:(0,d.jsxs)(i.B,{align:"center",gap:"md",children:[(0,d.jsx)(w.A,{size:64,color:"var(--mantine-color-gray-5)"}),(0,d.jsx)(j.h,{order:3,ta:"center",children:"开始对话"}),(0,d.jsx)(k.E,{c:"dimmed",ta:"center",maw:400,children:"向 AI 提问任何问题，开始您的智能对话"})]})}):(0,d.jsxs)(i.B,{gap:"md",children:[B.map(a=>(0,d.jsx)(n.Y,{justify:"user"===a.role?"flex-end":"flex-start",align:"flex-start",children:(0,d.jsxs)(m.t,{p:"md",radius:"lg",shadow:"sm",style:{maxWidth:"70%",backgroundColor:"user"===a.role?"var(--mantine-color-blue-6)":"white",color:"user"===a.role?"white":"inherit"},children:[(0,d.jsx)(k.E,{style:{whiteSpace:"pre-wrap"},children:a.content}),(0,d.jsxs)(n.Y,{justify:"space-between",mt:"xs",children:[(0,d.jsx)(k.E,{size:"xs",c:"user"===a.role?"blue.1":"dimmed",children:new Date(a.timestamp).toLocaleTimeString()}),a.model&&(0,d.jsx)(r.E,{size:"xs",variant:"light",children:a.model})]})]})},a.id)),F&&(0,d.jsx)(n.Y,{justify:"flex-start",children:(0,d.jsx)(m.t,{p:"md",radius:"lg",shadow:"sm",bg:"white",children:(0,d.jsxs)(n.Y,{gap:"sm",children:[(0,d.jsx)(s.a,{size:"sm"}),(0,d.jsx)(k.E,{c:"dimmed",children:"AI 正在思考..."})]})})}),(0,d.jsx)("div",{ref:H})]})}),(0,d.jsx)(m.t,{p:"md",shadow:"sm",withBorder:!0,children:(0,d.jsxs)(i.B,{gap:"xs",children:[(0,d.jsxs)(n.Y,{align:"flex-end",gap:"sm",children:[(0,d.jsx)(t.T,{value:D,onChange:a=>E(a.currentTarget.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),K())},placeholder:"输入您的消息... (Shift+Enter 换行，Enter 发送)",autosize:!0,minRows:1,maxRows:4,style:{flex:1},radius:"md"}),(0,d.jsx)(l.$,{onClick:K,disabled:!D.trim()||!c||F,loading:F,leftSection:(0,d.jsx)(y.A,{size:16}),children:"发送"})]}),c&&(0,d.jsxs)(k.E,{size:"xs",c:"dimmed",children:["使用 ",c.name," (",c.model||"default",")"]})]})})]})}},48796:(a,b,c)=>{c.d(b,{V:()=>D});var d=c(4460),e=c(36341),f=c(39445),g=c(36332),h=c(41055),i=c(76751),j=c(58740),k=c(87206),l=c(80925),m=c(24664),n=c(70689),o=c(10492),p=c(37277),q=c(5799),r=c(32302),s=c(39324),t=c(12136),u=c(63597),v=c(83700),w=c(80143),x=c(69623),y=c(30740),z=c(15375),A=c(61558),B=c(490);let C=async()=>null,D=()=>{let[a,b]=(0,e.useState)({theme:"system",language:"zh-CN",autoSave:!0,defaultProvider:"",maxTokens:4e3,temperature:.7,enableTelemetry:!1}),[c,D]=(0,e.useState)(!1),[E,F]=(0,e.useState)(!1);(0,e.useEffect)(()=>{G()},[]);let G=async()=>{try{let a=await C();if(!a)return void console.warn("Tauri API not available, using default settings");let c=await a("get_settings");b(c)}catch(a){console.error("Failed to load settings:",a)}},H=async()=>{let b=await C();if(!b)return void alert("Tauri API 不可用，无法保存设置");D(!0);try{await b("save_settings",{settings:a}),F(!0),setTimeout(()=>F(!1),2e3)}catch(a){console.error("Failed to save settings:",a),alert(`保存失败: ${a}`)}finally{D(!1)}},I=(a,c)=>{b(b=>({...b,[a]:c}))},J=async()=>{await H(),c||A.$e.show({title:"保存成功",message:"设置已保存",color:"green"})};return(0,d.jsx)(B.M,{title:"应用设置",description:"自定义您的应用体验",icon:(0,d.jsx)(s.A,{size:28,color:"var(--mantine-color-blue-6)"}),actions:(0,d.jsx)(f.$,{onClick:J,loading:c,color:E?"green":"blue",children:E?"已保存":"保存设置"}),children:(0,d.jsxs)(g.B,{gap:"lg",children:[(0,d.jsx)(h.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,d.jsxs)(g.B,{gap:"md",children:[(0,d.jsxs)(i.Y,{children:[(0,d.jsx)(t.A,{size:20,color:"var(--mantine-color-blue-6)"}),(0,d.jsx)(j.h,{order:4,children:"外观设置"})]}),(0,d.jsx)(k.c,{}),(0,d.jsx)(l.l,{label:"主题",description:"选择应用的外观主题",value:a.theme,onChange:a=>I("theme",a||"system"),data:[{value:"light",label:"浅色"},{value:"dark",label:"深色"},{value:"system",label:"跟随系统"}]}),(0,d.jsx)(l.l,{label:"语言",description:"选择应用界面语言",value:a.language,onChange:a=>I("language",a||"zh-CN"),data:[{value:"zh-CN",label:"简体中文"},{value:"en-US",label:"English"}]})]})}),(0,d.jsx)(h.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,d.jsxs)(g.B,{gap:"md",children:[(0,d.jsxs)(i.Y,{children:[(0,d.jsx)(u.A,{size:20,color:"var(--mantine-color-green-6)"}),(0,d.jsx)(j.h,{order:4,children:"AI 配置"})]}),(0,d.jsx)(k.c,{}),(0,d.jsx)(m.Q,{label:"最大 Token 数量",description:"控制 AI 响应的最大长度，较高的值会消耗更多 token",value:a.maxTokens,onChange:a=>I("maxTokens",a||4e3),min:100,max:32e3,step:100}),(0,d.jsxs)(n.a,{children:[(0,d.jsxs)(o.E,{size:"sm",fw:500,mb:"xs",children:["温度 (Temperature): ",a.temperature]}),(0,d.jsx)(p.A,{value:a.temperature,onChange:a=>I("temperature",a),min:0,max:2,step:.1,marks:[{value:0,label:"保守"},{value:1,label:"平衡"},{value:2,label:"创造性"}]}),(0,d.jsx)(o.E,{size:"xs",c:"dimmed",mt:"xs",children:"控制 AI 响应的随机性和创造性"})]})]})}),(0,d.jsx)(h.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,d.jsxs)(g.B,{gap:"md",children:[(0,d.jsxs)(i.Y,{children:[(0,d.jsx)(s.A,{size:20,color:"var(--mantine-color-orange-6)"}),(0,d.jsx)(j.h,{order:4,children:"行为设置"})]}),(0,d.jsx)(k.c,{}),(0,d.jsxs)(i.Y,{justify:"space-between",children:[(0,d.jsxs)(n.a,{children:[(0,d.jsx)(o.E,{size:"sm",fw:500,children:"自动保存"}),(0,d.jsx)(o.E,{size:"xs",c:"dimmed",children:"自动保存聊天记录和设置"})]}),(0,d.jsx)(q.d,{checked:a.autoSave,onChange:a=>I("autoSave",a.currentTarget.checked)})]}),(0,d.jsxs)(i.Y,{justify:"space-between",children:[(0,d.jsxs)(n.a,{children:[(0,d.jsx)(o.E,{size:"sm",fw:500,children:"启用遥测"}),(0,d.jsx)(o.E,{size:"xs",c:"dimmed",children:"帮助改进应用体验（匿名数据）"})]}),(0,d.jsx)(q.d,{checked:a.enableTelemetry,onChange:a=>I("enableTelemetry",a.currentTarget.checked)})]})]})}),(0,d.jsx)(h.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:(0,d.jsxs)(g.B,{gap:"md",children:[(0,d.jsxs)(i.Y,{children:[(0,d.jsx)(v.A,{size:20,color:"var(--mantine-color-violet-6)"}),(0,d.jsx)(j.h,{order:4,children:"数据管理"})]}),(0,d.jsx)(k.c,{}),(0,d.jsx)(r.F,{icon:(0,d.jsx)(w.A,{size:16}),color:"blue",variant:"light",children:(0,d.jsx)(o.E,{size:"sm",children:"数据管理功能可以帮助您备份和恢复应用数据"})}),(0,d.jsxs)(i.Y,{justify:"space-between",children:[(0,d.jsxs)(n.a,{children:[(0,d.jsx)(o.E,{size:"sm",fw:500,children:"导出数据"}),(0,d.jsx)(o.E,{size:"xs",c:"dimmed",children:"导出您的聊天记录和设置"})]}),(0,d.jsx)(f.$,{variant:"light",leftSection:(0,d.jsx)(x.A,{size:16}),size:"sm",children:"导出"})]}),(0,d.jsxs)(i.Y,{justify:"space-between",children:[(0,d.jsxs)(n.a,{children:[(0,d.jsx)(o.E,{size:"sm",fw:500,children:"导入数据"}),(0,d.jsx)(o.E,{size:"xs",c:"dimmed",children:"从备份文件恢复数据"})]}),(0,d.jsx)(f.$,{variant:"light",leftSection:(0,d.jsx)(y.A,{size:16}),size:"sm",children:"导入"})]}),(0,d.jsx)(k.c,{}),(0,d.jsxs)(i.Y,{justify:"space-between",children:[(0,d.jsxs)(n.a,{children:[(0,d.jsx)(o.E,{size:"sm",fw:500,c:"red",children:"清除所有数据"}),(0,d.jsx)(o.E,{size:"xs",c:"dimmed",children:"删除所有聊天记录、API Key 和设置"})]}),(0,d.jsx)(f.$,{variant:"light",color:"red",leftSection:(0,d.jsx)(z.A,{size:16}),size:"sm",onClick:()=>{confirm("确定要清除所有数据吗？此操作不可恢复！")&&A.$e.show({title:"功能开发中",message:"此功能正在开发中...",color:"orange"})},children:"清除"})]})]})})]})})}},48855:(a,b,c)=>{c.d(b,{g:()=>G});var d=c(4460),e=c(36341),f=c(36332),g=c(76751),h=c(70689),i=c(58740),j=c(10492),k=c(39445),l=c(88196),m=c(65016),n=c(41055),o=c(1094),p=c(92098),q=c(20948),r=c(62765),s=c(87206),t=c(39756),u=c(61932),v=c(61903),w=c(80925),x=c(83781),y=c(63597),z=c(52663),A=c(98667),B=c(29758),C=c(51471),D=c(37e3),E=c(61558);let F=[{id:1,title:"文章写作助手",description:"帮助您创作高质量的文章内容",category:"写作",template:"请帮我写一篇关于 {主题} 的文章，要求：\n1. 结构清晰，逻辑严谨\n2. 内容深入，观点独特\n3. 语言流畅，易于理解\n4. 字数控制在 {字数} 字左右"},{id:2,title:"代码审查专家",description:"专业的代码审查和优化建议",category:"编程",template:"请审查以下代码并提供改进建议：\n\n```{编程语言}\n{代码内容}\n```\n\n请从以下角度分析：\n1. 代码质量和可读性\n2. 性能优化建议\n3. 安全性考虑\n4. 最佳实践建议"},{id:3,title:"数据分析师",description:"专业的数据分析和洞察提取",category:"分析",template:"请分析以下数据并提供洞察：\n\n{数据描述}\n\n分析要求：\n1. 识别关键趋势和模式\n2. 提供数据驱动的洞察\n3. 给出可行的建议\n4. 用图表或可视化方式展示结果"},{id:4,title:"翻译专家",description:"专业的多语言翻译服务",category:"翻译",template:"请将以下内容从 {源语言} 翻译成 {目标语言}，要求：\n1. 准确传达原文意思\n2. 符合目标语言表达习惯\n3. 保持原文的语气和风格\n\n原文：\n{待翻译内容}"},{id:5,title:"学习助手",description:"帮助理解和学习复杂概念",category:"教育",template:"请帮我理解 {概念/主题}，要求：\n1. 用简单易懂的语言解释\n2. 提供具体的例子\n3. 指出重点和难点\n4. 给出学习建议\n\n我的背景：{学习背景}"}],G=()=>{let[a,b]=(0,e.useState)("全部"),[c,G]=(0,e.useState)(""),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(!1),[L,M]=(0,e.useState)(!1),N=["全部","写作","编程","分析","翻译","教育"],O=F.filter(b=>{let d="全部"===a||b.category===a,e=b.title.toLowerCase().includes(c.toLowerCase())||b.description.toLowerCase().includes(c.toLowerCase());return d&&e}),P=a=>{navigator.clipboard.writeText(a),E.$e.show({title:"复制成功",message:"模板已复制到剪贴板",color:"green"})};return(0,d.jsxs)(f.B,{gap:"lg",p:"md",children:[(0,d.jsxs)(g.Y,{justify:"space-between",children:[(0,d.jsxs)(g.Y,{children:[(0,d.jsx)(x.A,{size:28,color:"var(--mantine-color-green-6)"}),(0,d.jsxs)(h.a,{children:[(0,d.jsx)(i.h,{order:2,children:"提示词模板库"}),(0,d.jsx)(j.E,{c:"dimmed",size:"sm",children:"精选的 AI 提示词模板，提升您的工作效率"})]})]}),(0,d.jsxs)(g.Y,{children:[(0,d.jsx)(k.$,{leftSection:(0,d.jsx)(y.A,{size:16}),variant:"gradient",gradient:{from:"green",to:"teal"},children:"AI 生成"}),(0,d.jsx)(k.$,{leftSection:(0,d.jsx)(z.A,{size:16}),onClick:()=>M(!0),children:"创建模板"})]})]}),(0,d.jsx)(g.Y,{children:(0,d.jsx)(l.k,{placeholder:"搜索模板...",value:c,onChange:a=>G(a.currentTarget.value),leftSection:(0,d.jsx)(A.A,{size:16}),style:{flex:1}})}),(0,d.jsx)(m.t,{value:a,onChange:a=>b(a||"全部"),children:(0,d.jsx)(m.t.List,{children:N.map(a=>(0,d.jsx)(m.t.Tab,{value:a,children:a},a))})}),0===O.length?(0,d.jsx)(n.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,children:(0,d.jsx)(o.o,{children:(0,d.jsxs)(f.B,{align:"center",gap:"md",children:[(0,d.jsx)(x.A,{size:64,color:"var(--mantine-color-gray-5)"}),(0,d.jsx)(i.h,{order:3,ta:"center",children:"没有找到匹配的模板"}),(0,d.jsx)(j.E,{c:"dimmed",ta:"center",maw:400,children:"尝试调整搜索条件或选择其他分类"})]})})}):(0,d.jsx)(p.x,{children:O.map(a=>(0,d.jsx)(p.x.Col,{span:{base:12,md:6,lg:4},children:(0,d.jsx)(n.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,h:"100%",children:(0,d.jsxs)(f.B,{gap:"sm",h:"100%",children:[(0,d.jsx)(g.Y,{justify:"space-between",children:(0,d.jsx)(q.E,{variant:"light",color:"blue",size:"sm",children:a.category})}),(0,d.jsxs)(h.a,{style:{flex:1},children:[(0,d.jsx)(i.h,{order:4,mb:"xs",children:a.title}),(0,d.jsx)(j.E,{size:"sm",c:"dimmed",mb:"sm",lineClamp:2,children:a.description}),(0,d.jsx)(r.t,{p:"sm",bg:"gray.0",radius:"md",mb:"sm",children:(0,d.jsx)(j.E,{size:"xs",c:"dimmed",lineClamp:4,style:{fontFamily:"monospace"},children:a.template})})]}),(0,d.jsx)(s.c,{}),(0,d.jsxs)(g.Y,{justify:"space-between",children:[(0,d.jsxs)(g.Y,{gap:"xs",children:[(0,d.jsx)(t.M,{variant:"light",size:"sm",onClick:()=>{},children:(0,d.jsx)(B.A,{size:14})}),(0,d.jsx)(t.M,{variant:"light",size:"sm",onClick:()=>{},children:(0,d.jsx)(C.A,{size:14})})]}),(0,d.jsx)(k.$,{size:"xs",leftSection:(0,d.jsx)(D.A,{size:12}),onClick:()=>P(a.template),children:"复制"})]})]})})},a.id))}),(0,d.jsx)(u.a,{opened:J,onClose:()=>K(!1),title:H?.title||"模板详情",size:"lg",children:H&&(0,d.jsxs)(f.B,{gap:"md",children:[(0,d.jsx)(g.Y,{children:(0,d.jsx)(q.E,{color:"blue",children:H.category})}),(0,d.jsx)(j.E,{children:H.description}),(0,d.jsxs)(h.a,{children:[(0,d.jsx)(j.E,{fw:500,mb:"sm",children:"模板内容："}),(0,d.jsx)(r.t,{p:"md",withBorder:!0,bg:"gray.0",children:(0,d.jsx)(j.E,{size:"sm",style:{whiteSpace:"pre-wrap",fontFamily:"monospace"},children:H.template})})]}),(0,d.jsx)(g.Y,{justify:"flex-end",children:(0,d.jsx)(k.$,{leftSection:(0,d.jsx)(D.A,{size:16}),onClick:()=>{P(H.template),K(!1)},children:"复制模板"})})]})}),(0,d.jsx)(u.a,{opened:L,onClose:()=>M(!1),title:"创建提示词模板",size:"lg",children:(0,d.jsxs)(f.B,{gap:"md",children:[(0,d.jsx)(l.k,{label:"模板标题",placeholder:"输入模板标题",required:!0}),(0,d.jsx)(v.T,{label:"模板描述",placeholder:"描述这个模板的用途和特点",minRows:2,required:!0}),(0,d.jsx)(w.l,{label:"分类",placeholder:"选择分类",data:N.filter(a=>"全部"!==a),required:!0}),(0,d.jsx)(v.T,{label:"模板内容",placeholder:"输入提示词模板内容，使用 {参数名} 表示可替换的参数",minRows:6,required:!0}),(0,d.jsxs)(g.Y,{justify:"flex-end",mt:"md",children:[(0,d.jsx)(k.$,{variant:"light",onClick:()=>M(!1),children:"取消"}),(0,d.jsx)(k.$,{children:"创建模板"})]})]})})]})}},49582:(a,b,c)=>{c.d(b,{z:()=>D});var d=c(4460),e=c(36341),f=c(36332),g=c(76751),h=c(70689),i=c(58740),j=c(10492),k=c(39445),l=c(92098),m=c(41055),n=c(20948),o=c(39756),p=c(62765),q=c(88196),r=c(48272),s=c(80925),t=c(1094),u=c(63597),v=c(99517),w=c(4568),x=c(52663),y=c(15375),z=c(23659);let A=(a,b=24)=>{switch(a){case"robot":return(0,d.jsx)(u.A,{size:b});case"brain":return(0,d.jsx)(v.A,{size:b});default:return(0,d.jsx)(w.A,{size:b})}},B=async()=>null,C=[{id:"openai",name:"OpenAI",description:"GPT-4, GPT-3.5 等模型",icon:"robot",models:[{id:"gpt-4",name:"GPT-4",contextLength:8192},{id:"gpt-4-turbo",name:"GPT-4 Turbo",contextLength:128e3},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",contextLength:4096}],requiredFields:[{key:"apiKey",label:"API Key",type:"password",required:!0,placeholder:"sk-..."},{key:"baseUrl",label:"Base URL (可选)",type:"url",required:!1,placeholder:"https://api.openai.com/v1"}]},{id:"anthropic",name:"Anthropic",description:"Claude 系列模型",icon:"brain",models:[{id:"claude-3-opus-20240229",name:"Claude 3 Opus",contextLength:2e5},{id:"claude-3-sonnet-20240229",name:"Claude 3 Sonnet",contextLength:2e5},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",contextLength:2e5}],requiredFields:[{key:"apiKey",label:"API Key",type:"password",required:!0,placeholder:"sk-ant-..."}]}],D=()=>{let[a,b]=(0,e.useState)([]),[c,u]=(0,e.useState)(!1),[v,D]=(0,e.useState)(null),[E,F]=(0,e.useState)({}),[G,H]=(0,e.useState)(!1),[I,J]=(0,e.useState)({});(0,e.useEffect)(()=>{K()},[]);let K=async()=>{try{let a=await B();if(!a)return void console.warn("Tauri API not available");let c=await a("get_api_keys");b(c)}catch(a){console.error("Failed to load API keys:",a)}},L=()=>{u(!0),D(null),F({})},M=(a,b)=>{F(c=>({...c,[a]:b}))},N=async()=>{if(v&&E.apiKey){H(!0);try{let a=await B();if(!a)return void alert("Tauri API 不可用，无法测试 API Key");let b=await a("test_api_key",{provider:v.id,apiKey:E.apiKey,baseUrl:E.baseUrl||null});J(a=>({...a,[v.id]:b})),b?alert("API Key 测试成功！"):alert("API Key 测试失败，请检查密钥是否正确。")}catch(a){console.error("API Key test failed:",a),alert(`测试失败: ${a}`)}finally{H(!1)}}},O=async()=>{if(!v||!E.apiKey)return;let b=await B();if(!b)return void alert("Tauri API 不可用，无法保存 API Key");let c={id:Date.now().toString(),name:E.name||`${v.name} Key`,provider:v.id,apiKey:E.apiKey,baseUrl:E.baseUrl||void 0,model:E.model||v.models[0]?.id,isDefault:0===a.filter(a=>a.provider===v.id).length,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{await b("save_api_key",{apiKey:c}),await K(),u(!1),D(null),F({})}catch(a){console.error("Failed to save API key:",a),alert(`保存失败: ${a}`)}},P=async a=>{if(!confirm("确定要删除这个 API Key 吗？"))return;let b=await B();if(!b)return void alert("Tauri API 不可用，无法删除 API Key");try{await b("delete_api_key",{keyId:a}),await K()}catch(a){console.error("Failed to delete API key:",a),alert(`删除失败: ${a}`)}},Q=async a=>{let b=await B();if(!b)return void alert("Tauri API 不可用，无法更新 API Key");let c={...a,isDefault:!a.isDefault,updatedAt:new Date().toISOString()};try{await b("save_api_key",{apiKey:c}),await K()}catch(a){console.error("Failed to update API key:",a)}};return(0,d.jsxs)(f.B,{gap:"lg",p:"md",children:[(0,d.jsxs)(g.Y,{justify:"space-between",children:[(0,d.jsxs)(g.Y,{children:[(0,d.jsx)(w.A,{size:28,color:"var(--mantine-color-blue-6)"}),(0,d.jsxs)(h.a,{children:[(0,d.jsx)(i.h,{order:2,children:"API Key 管理"}),(0,d.jsx)(j.E,{c:"dimmed",children:"管理您的 AI 服务提供商 API 密钥"})]})]}),(0,d.jsx)(k.$,{leftSection:(0,d.jsx)(x.A,{size:16}),onClick:L,children:"添加 API Key"})]}),(0,d.jsx)(l.x,{children:a.map(a=>{let b=C.find(b=>b.id===a.provider);return(0,d.jsx)(l.x.Col,{span:{base:12,md:6,lg:4},children:(0,d.jsxs)(m.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,h:"100%",children:[(0,d.jsxs)(g.Y,{justify:"space-between",mb:"md",children:[(0,d.jsxs)(g.Y,{children:[b?.icon||(0,d.jsx)(w.A,{size:24}),(0,d.jsxs)(h.a,{children:[(0,d.jsx)(j.E,{fw:500,children:a.name}),(0,d.jsx)(j.E,{size:"sm",c:"dimmed",children:b?.name})]})]}),a.isDefault&&(0,d.jsx)(n.E,{variant:"light",color:"blue",size:"sm",children:"默认"})]}),(0,d.jsxs)(f.B,{gap:"xs",mb:"md",children:[(0,d.jsxs)(g.Y,{justify:"space-between",children:[(0,d.jsx)(j.E,{size:"sm",c:"dimmed",children:"API Key:"}),(0,d.jsxs)(j.E,{size:"sm",ff:"monospace",children:[a.apiKey.substring(0,8),"...",a.apiKey.slice(-4)]})]}),a.model&&(0,d.jsxs)(g.Y,{justify:"space-between",children:[(0,d.jsx)(j.E,{size:"sm",c:"dimmed",children:"模型:"}),(0,d.jsx)(j.E,{size:"sm",children:a.model})]}),(0,d.jsxs)(g.Y,{justify:"space-between",children:[(0,d.jsx)(j.E,{size:"sm",c:"dimmed",children:"状态:"}),(0,d.jsx)(n.E,{variant:"light",color:a.isActive?"green":"gray",size:"sm",children:a.isActive?"活跃":"禁用"})]})]}),(0,d.jsxs)(g.Y,{gap:"xs",children:[(0,d.jsx)(k.$,{variant:"light",size:"xs",onClick:()=>Q(a),style:{flex:1},children:a.isDefault?"取消默认":"设为默认"}),(0,d.jsx)(o.M,{variant:"light",color:"red",onClick:()=>P(a.id),children:(0,d.jsx)(y.A,{size:16})})]})]})},a.id)})}),c&&(0,d.jsxs)(m.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[(0,d.jsx)(i.h,{order:3,mb:"md",children:"添加新的 API Key"}),v?(0,d.jsxs)(f.B,{gap:"md",children:[(0,d.jsxs)(g.Y,{mb:"md",children:[A(v.icon),(0,d.jsxs)(h.a,{children:[(0,d.jsx)(j.E,{fw:500,children:v.name}),(0,d.jsx)(j.E,{size:"sm",c:"dimmed",children:v.description})]})]}),(0,d.jsx)(q.k,{label:"配置名称",placeholder:`${v.name} 配置`,value:E.name||"",onChange:a=>M("name",a.currentTarget.value)}),v.requiredFields.map(a=>(0,d.jsxs)(h.a,{children:["password"===a.type?(0,d.jsx)(r.y,{label:(0,d.jsxs)(g.Y,{gap:"xs",children:[(0,d.jsx)(j.E,{children:a.label}),a.required&&(0,d.jsx)(j.E,{c:"red",children:"*"})]}),placeholder:a.placeholder,value:E[a.key]||"",onChange:b=>M(a.key,b.currentTarget.value),required:a.required}):(0,d.jsx)(q.k,{label:(0,d.jsxs)(g.Y,{gap:"xs",children:[(0,d.jsx)(j.E,{children:a.label}),a.required&&(0,d.jsx)(j.E,{c:"red",children:"*"})]}),type:a.type,placeholder:a.placeholder,value:E[a.key]||"",onChange:b=>M(a.key,b.currentTarget.value),required:a.required}),a.description&&(0,d.jsx)(j.E,{size:"xs",c:"dimmed",mt:"xs",children:a.description})]},a.key)),(0,d.jsx)(s.l,{label:"默认模型",value:E.model||v.models[0]?.id||"",onChange:a=>M("model",a||""),data:v.models.map(a=>({value:a.id,label:a.name}))}),(0,d.jsxs)(g.Y,{justify:"flex-end",mt:"md",children:[(0,d.jsx)(k.$,{variant:"subtle",onClick:()=>{u(!1),D(null),F({})},children:"取消"}),(0,d.jsx)(k.$,{variant:"light",leftSection:(0,d.jsx)(z.A,{size:16}),onClick:N,disabled:!E.apiKey||G,loading:G,children:"测试连接"}),(0,d.jsx)(k.$,{onClick:O,disabled:!E.apiKey,children:"保存"})]})]}):(0,d.jsxs)(f.B,{gap:"md",children:[(0,d.jsx)(j.E,{c:"dimmed",children:"选择 AI 服务提供商："}),(0,d.jsx)(l.x,{children:C.map(a=>(0,d.jsx)(l.x.Col,{span:{base:12,sm:6},children:(0,d.jsx)(p.t,{p:"md",withBorder:!0,style:{cursor:"pointer"},onClick:()=>{D(a),F({})},className:"hover:shadow-md transition-shadow",children:(0,d.jsxs)(g.Y,{children:[A(a.icon),(0,d.jsxs)(h.a,{children:[(0,d.jsx)(j.E,{fw:500,children:a.name}),(0,d.jsx)(j.E,{size:"sm",c:"dimmed",children:a.description})]})]})})},a.id))})]})]}),0===a.length&&!c&&(0,d.jsx)(m.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,children:(0,d.jsx)(t.o,{children:(0,d.jsxs)(f.B,{align:"center",gap:"md",children:[(0,d.jsx)(w.A,{size:64,color:"var(--mantine-color-gray-5)"}),(0,d.jsx)(i.h,{order:3,ta:"center",children:"还没有 API Key"}),(0,d.jsx)(j.E,{c:"dimmed",ta:"center",maw:400,children:"添加您的第一个 AI 服务提供商 API Key 来开始使用"}),(0,d.jsx)(k.$,{leftSection:(0,d.jsx)(x.A,{size:16}),onClick:L,children:"添加 API Key"})]})})})]})}},82656:(a,b,c)=>{c.d(b,{mq:()=>D});var d=c(4460),e=c(36341);new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString();let f=({node:a,onToggleExpand:b,onGenerateChildren:c,onSearch:d,searchProviders:e})=>{let[g,h]=useState(!1);return _jsxs(Box,{mb:"md",children:[_jsxs(Card,{shadow:"sm",padding:"md",radius:"md",withBorder:!0,children:[_jsxs(Group,{justify:"space-between",mb:"xs",children:[_jsxs(Group,{gap:"sm",children:[_jsx(ActionIcon,{variant:"subtle",onClick:()=>b(a.id),size:"sm",children:a.children.length>0?a.expanded?_jsx(IconFolderOpen,{size:18}):_jsx(IconFolder,{size:18}):_jsx(IconFile,{size:18})}),_jsx(Title,{order:4,size:"md",children:a.title})]}),_jsxs(Group,{gap:"xs",children:[_jsx(ActionIcon,{variant:"subtle",onClick:()=>h(!g),size:"sm",children:g?_jsx(IconEyeOff,{size:16}):_jsx(IconEye,{size:16})}),_jsx(Button,{variant:"light",size:"xs",leftSection:_jsx(IconRobot,{size:14}),onClick:()=>c(a),children:"AI扩展"})]})]}),a.description&&_jsx(Text,{size:"sm",c:"dimmed",mb:"sm",children:a.description}),_jsx(Collapse,{in:g&&a.questions.length>0,children:_jsxs(Paper,{p:"sm",bg:"gray.0",radius:"sm",mt:"sm",children:[_jsx(Text,{size:"sm",fw:500,mb:"xs",children:"相关问题："}),_jsx(Stack,{gap:"xs",children:a.questions.map((b,c)=>_jsxs(Group,{justify:"space-between",align:"flex-start",children:[_jsxs(Text,{size:"sm",style:{flex:1},children:["• ",b]}),_jsx(Group,{gap:"xs",children:e.filter(a=>a.enabled).map(c=>_jsx(ActionIcon,{size:"xs",variant:"light",onClick:()=>d(`${b} ${a.title}`),title:`在${c.name}中搜索`,children:_jsx(IconSearch,{size:12})},c.id))})]},c))})]})})]}),_jsx(Collapse,{in:a.expanded&&a.children.length>0,children:_jsx(Box,{ml:"xl",pl:"md",style:{borderLeft:"2px solid var(--mantine-color-gray-3)"},children:_jsx(Stack,{gap:"sm",mt:"sm",children:a.children.map(a=>_jsx(f,{node:a,onToggleExpand:b,onGenerateChildren:c,onSearch:d,searchProviders:e},a.id))})})})]})};var g=c(1094),h=c(36332),i=c(10492),j=c(76751),k=c(70689),l=c(58740),m=c(39445),n=c(41055),o=c(92098),p=c(20948),q=c(87206),r=c(39756),s=c(61932),t=c(88196),u=c(61903),v=c(80925),w=c(99517),x=c(63597),y=c(52663),z=c(29758),A=c(51471),B=c(15375),C=c(61558);let D=({onFrameworkSelect:a})=>{let[b,c]=(0,e.useState)([]),[f,D]=(0,e.useState)(!0),[E,F]=(0,e.useState)(!1),[G,H]=(0,e.useState)(!1),[I,J]=(0,e.useState)(null),[K,L]=(0,e.useState)({title:"",description:"",domain:""}),[M,N]=(0,e.useState)({title:"",description:"",domain:"",targetUser:"",complexity:"medium"}),[O,P]=(0,e.useState)(!1);(0,e.useEffect)(()=>{Q()},[]);let Q=async()=>{try{D(!0),c([])}catch(a){console.error("Failed to load frameworks:",a),C.$e.show({title:"加载失败",message:"无法加载知识框架",color:"red"})}finally{D(!1)}},R=async()=>{try{C.$e.show({title:"创建成功",message:"知识框架已创建",color:"green"}),F(!1),T(),Q()}catch(a){C.$e.show({title:"创建失败",message:"无法创建知识框架",color:"red"})}},S=async()=>{try{P(!0),C.$e.show({title:"AI 创建成功",message:"知识框架已通过 AI 辅助创建",color:"green"}),H(!1),N({title:"",description:"",domain:"",targetUser:"",complexity:"medium"}),Q()}catch(a){C.$e.show({title:"AI 创建失败",message:"无法通过 AI 创建知识框架",color:"red"})}finally{P(!1)}},T=()=>{L({title:"",description:"",domain:""})};return f?(0,d.jsx)(g.o,{h:400,children:(0,d.jsxs)(h.B,{align:"center",children:[(0,d.jsx)(w.A,{size:64,color:"var(--mantine-color-gray-5)"}),(0,d.jsx)(i.E,{c:"dimmed",children:"加载知识框架..."})]})}):(0,d.jsxs)(h.B,{gap:"lg",p:"md",children:[(0,d.jsxs)(j.Y,{justify:"space-between",children:[(0,d.jsxs)(j.Y,{children:[(0,d.jsx)(w.A,{size:28,color:"var(--mantine-color-violet-6)"}),(0,d.jsxs)(k.a,{children:[(0,d.jsx)(l.h,{order:2,children:"知识框架"}),(0,d.jsx)(i.E,{c:"dimmed",size:"sm",children:"创建和管理结构化知识体系"})]})]}),(0,d.jsxs)(j.Y,{children:[(0,d.jsx)(m.$,{leftSection:(0,d.jsx)(x.A,{size:16}),variant:"gradient",gradient:{from:"violet",to:"purple"},onClick:()=>H(!0),children:"AI 创建"}),(0,d.jsx)(m.$,{leftSection:(0,d.jsx)(y.A,{size:16}),onClick:()=>F(!0),children:"手动创建"})]})]}),0===b.length?(0,d.jsx)(n.Z,{shadow:"sm",padding:"xl",radius:"md",withBorder:!0,children:(0,d.jsx)(g.o,{children:(0,d.jsxs)(h.B,{align:"center",gap:"md",children:[(0,d.jsx)(w.A,{size:64,color:"var(--mantine-color-gray-5)"}),(0,d.jsx)(l.h,{order:3,ta:"center",children:"还没有知识框架"}),(0,d.jsx)(i.E,{c:"dimmed",ta:"center",maw:400,children:"创建您的第一个知识框架来组织和管理知识体系"}),(0,d.jsxs)(j.Y,{children:[(0,d.jsx)(m.$,{leftSection:(0,d.jsx)(x.A,{size:16}),variant:"gradient",gradient:{from:"violet",to:"purple"},onClick:()=>H(!0),children:"AI 辅助创建"}),(0,d.jsx)(m.$,{leftSection:(0,d.jsx)(y.A,{size:16}),variant:"light",onClick:()=>F(!0),children:"手动创建"})]})]})})}):(0,d.jsx)(o.x,{children:b.map(a=>(0,d.jsx)(o.x.Col,{span:{base:12,md:6,lg:4},children:(0,d.jsx)(n.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,h:"100%",children:(0,d.jsxs)(h.B,{gap:"sm",h:"100%",children:[(0,d.jsxs)(j.Y,{justify:"space-between",children:[(0,d.jsx)(p.E,{variant:"light",color:a.local_only?"orange":"green",size:"sm",children:a.local_only?"本地":"已同步"}),(0,d.jsx)(p.E,{variant:"outline",size:"xs",children:a.domain})]}),(0,d.jsxs)(k.a,{style:{flex:1},children:[(0,d.jsx)(l.h,{order:4,mb:"xs",children:a.title}),(0,d.jsx)(i.E,{size:"sm",c:"dimmed",mb:"sm",lineClamp:3,children:a.description})]}),(0,d.jsx)(q.c,{}),(0,d.jsxs)(j.Y,{justify:"space-between",children:[(0,d.jsxs)(j.Y,{gap:"xs",children:[(0,d.jsx)(r.M,{variant:"light",size:"sm",onClick:()=>{},children:(0,d.jsx)(z.A,{size:14})}),(0,d.jsx)(r.M,{variant:"light",size:"sm",onClick:()=>{},children:(0,d.jsx)(A.A,{size:14})})]}),(0,d.jsx)(r.M,{variant:"light",color:"red",size:"sm",onClick:()=>{},children:(0,d.jsx)(B.A,{size:14})})]})]})})},a.id))}),(0,d.jsx)(s.a,{opened:E,onClose:()=>F(!1),title:"创建知识框架",size:"md",children:(0,d.jsxs)(h.B,{gap:"md",children:[(0,d.jsx)(t.k,{label:"标题",placeholder:"React 开发框架",value:K.title,onChange:a=>L({...K,title:a.target.value}),required:!0}),(0,d.jsx)(u.T,{label:"描述",placeholder:"一个完整的React开发学习框架",value:K.description,onChange:a=>L({...K,description:a.target.value}),minRows:3,required:!0}),(0,d.jsx)(t.k,{label:"领域",placeholder:"前端开发",value:K.domain,onChange:a=>L({...K,domain:a.target.value}),required:!0}),(0,d.jsx)(m.$,{onClick:R,loading:f,children:"创建框架"})]})}),(0,d.jsx)(s.a,{opened:G,onClose:()=>H(!1),title:"AI 辅助创建知识框架",size:"md",children:(0,d.jsxs)(h.B,{gap:"md",children:[(0,d.jsx)(t.k,{label:"标题",placeholder:"React 开发框架",value:M.title,onChange:a=>N({...M,title:a.target.value}),required:!0}),(0,d.jsx)(u.T,{label:"描述",placeholder:"一个完整的React开发学习框架",value:M.description,onChange:a=>N({...M,description:a.target.value}),minRows:3,required:!0}),(0,d.jsx)(t.k,{label:"领域",placeholder:"前端开发",value:M.domain,onChange:a=>N({...M,domain:a.target.value}),required:!0}),(0,d.jsx)(t.k,{label:"目标用户",placeholder:"初学者/中级开发者/高级开发者",value:M.targetUser,onChange:a=>N({...M,targetUser:a.target.value})}),(0,d.jsx)(v.l,{label:"复杂度",value:M.complexity,onChange:a=>N({...M,complexity:a||"medium"}),data:[{value:"simple",label:"简单"},{value:"medium",label:"中等"},{value:"complex",label:"复杂"}]}),(0,d.jsx)(m.$,{onClick:S,loading:O,children:"AI 创建框架"})]})})]})};new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString()}};