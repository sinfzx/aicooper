(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{1274:(e,s,r)=>{"use strict";r.d(s,{$n:()=>l,Zp:()=>a,Wu:()=>c,aR:()=>i});var n=r(7770);r(6354);let l=e=>{let{variant:s="primary",size:r="md",className:l="",children:a,...i}=e,c="".concat("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(l);return(0,n.jsx)("button",{className:c,...i,children:a})},a=e=>{let{children:s,className:r=""}=e;return(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 ".concat(r),children:s})},i=e=>{let{children:s,className:r=""}=e;return(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(r),children:s})},c=e=>{let{children:s,className:r=""}=e;return(0,n.jsx)("div",{className:"px-6 py-4 ".concat(r),children:s})}},4402:(e,s,r)=>{Promise.resolve().then(r.bind(r,8308))},8308:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var n=r(7770),l=r(6354),a=r(1274);function i(){let[e,s]=(0,l.useState)(null),[i,c]=(0,l.useState)(null),[t,d]=(0,l.useState)(null);(0,l.useEffect)(()=>{o()},[]);let o=()=>{let e=window;s({userAgent:window.navigator.userAgent,protocol:window.location.protocol,host:window.location.host,href:window.location.href,hasTauri:!!e.__TAURI__,hasTauriInternals:!!e.__TAURI_INTERNALS__,nodeEnv:"production",tauriBuild:"true",tauriObject:e.__TAURI__?Object.keys(e.__TAURI__):null,tauriInternals:e.__TAURI_INTERNALS__?Object.keys(e.__TAURI_INTERNALS__):null})},u=async()=>{try{console.log("Testing Tauri import...");let{invoke:e}=await r.e(379).then(r.bind(r,7379));console.log("Tauri import successful:",!!e),c({success:!0,hasInvoke:!!e,invokeType:typeof e})}catch(e){console.error("Tauri import failed:",e),c({success:!1,error:String(e)})}},x=async()=>{try{console.log("Testing Tauri API...");let{invoke:e}=await r.e(379).then(r.bind(r,7379));if(!e)throw Error("Invoke function not available");let s=await e("greet");console.log("Tauri API test successful:",s),d({success:!0,result:s})}catch(e){console.error("Tauri API test failed:",e),d({success:!1,error:String(e)})}},h=async()=>{try{console.log("Testing knowledge frameworks API...");let{invoke:e}=await r.e(379).then(r.bind(r,7379)),s=await e("get_knowledge_frameworks");console.log("Knowledge frameworks API test successful:",s),d({success:!0,command:"get_knowledge_frameworks",result:s})}catch(e){console.error("Knowledge frameworks API test failed:",e),d({success:!1,command:"get_knowledge_frameworks",error:String(e)})}};return(0,n.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDD27 Tauri 环境调试"}),(0,n.jsxs)(a.Zp,{className:"mb-6",children:[(0,n.jsx)(a.aR,{children:(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"环境信息"})}),(0,n.jsx)(a.Wu,{children:e?(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"User Agent:"}),(0,n.jsx)("div",{className:"text-xs text-gray-600 break-all",children:e.userAgent})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Protocol:"})," ",e.protocol]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Host:"})," ",e.host]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Node Env:"})," ",e.nodeEnv]})]}),(0,n.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:[(0,n.jsx)("h3",{className:"font-medium mb-2",children:"Tauri 检测结果"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(e.hasTauri?"bg-green-500":"bg-red-500")}),(0,n.jsxs)("span",{children:["__TAURI__: ",e.hasTauri?"✅ 存在":"❌ 不存在"]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(e.hasTauriInternals?"bg-green-500":"bg-red-500")}),(0,n.jsxs)("span",{children:["__TAURI_INTERNALS__: ",e.hasTauriInternals?"✅ 存在":"❌ 不存在"]})]})]}),e.tauriObject&&(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("strong",{children:"Tauri Object Keys:"}),(0,n.jsx)("div",{className:"text-xs text-gray-600",children:e.tauriObject.join(", ")})]})]})]}):(0,n.jsx)("p",{children:"正在检测环境..."})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,n.jsx)(a.$n,{onClick:u,variant:"outline",children:"测试 Tauri 导入"}),(0,n.jsx)(a.$n,{onClick:x,variant:"outline",children:"测试 Tauri API"}),(0,n.jsx)(a.$n,{onClick:h,variant:"outline",children:"测试知识框架API"})]}),(i||t)&&(0,n.jsxs)(a.Zp,{children:[(0,n.jsx)(a.aR,{children:(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"测试结果"})}),(0,n.jsxs)(a.Wu,{children:[i&&(0,n.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:[(0,n.jsx)("h3",{className:"font-medium mb-2",children:"Tauri 导入测试"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(i.success?"bg-green-500":"bg-red-500")}),(0,n.jsx)("span",{children:i.success?"✅ 成功":"❌ 失败"})]}),(0,n.jsx)("pre",{className:"text-xs bg-white p-2 rounded border",children:JSON.stringify(i,null,2)})]}),t&&(0,n.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,n.jsx)("h3",{className:"font-medium mb-2",children:"API 测试"}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(t.success?"bg-green-500":"bg-red-500")}),(0,n.jsx)("span",{children:t.success?"✅ 成功":"❌ 失败"}),t.command&&(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:["(",t.command,")"]})]}),(0,n.jsx)("pre",{className:"text-xs bg-white p-2 rounded border",children:JSON.stringify(t,null,2)})]})]})]}),(0,n.jsxs)(a.Zp,{className:"mt-6",children:[(0,n.jsx)(a.aR,{children:(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"调试说明"})}),(0,n.jsx)(a.Wu,{children:(0,n.jsxs)("div",{className:"text-sm space-y-2",children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:"如果Tauri API不可用，可能的原因："})}),(0,n.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[(0,n.jsx)("li",{children:"应用没有在Tauri环境中运行（在浏览器中打开了开发服务器）"}),(0,n.jsx)("li",{children:"Tauri开发服务器没有正确启动"}),(0,n.jsx)("li",{children:"Tauri配置有问题"}),(0,n.jsx)("li",{children:"前端和后端版本不匹配"})]}),(0,n.jsx)("p",{className:"mt-4",children:(0,n.jsx)("strong",{children:"解决方案："})}),(0,n.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[(0,n.jsxs)("li",{children:["确保使用 ",(0,n.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"pnpm tauri:dev"})," 启动应用"]}),(0,n.jsx)("li",{children:"检查Tauri配置文件"}),(0,n.jsx)("li",{children:"重新安装依赖"})]})]})})]})]})}}},e=>{e.O(0,[854,162,358],()=>e(e.s=4402)),_N_E=e.O()}]);