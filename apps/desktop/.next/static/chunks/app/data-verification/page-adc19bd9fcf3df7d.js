(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{1274:(e,t,s)=>{"use strict";s.d(t,{$n:()=>r,Zp:()=>l,Wu:()=>i,aR:()=>n});var a=s(7770);s(6354);let r=e=>{let{variant:t="primary",size:s="md",className:r="",children:l,...n}=e,i="".concat("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s]," ").concat(r);return(0,a.jsx)("button",{className:i,...n,children:l})},l=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 ".concat(s),children:t})},n=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(s),children:t})},i=e=>{let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 ".concat(s),children:t})}},1505:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(7770),r=s(6354),l=s(1274);let n=async()=>{try{if(window.__TAURI__){let{invoke:e}=await s.e(379).then(s.bind(s,7379));return e}}catch(e){console.warn("Tauri API not available:",e)}return null};function i(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[x,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{m()},[]);let m=async()=>{d(!0),o(null);try{let e=await n();if(!e)throw Error("Tauri API not available");let s=await e("get_knowledge_frameworks");t(Array.isArray(s)?s:[]);let a=await e("get_prompt_templates");i(Array.isArray(a)?a:[])}catch(e){console.error("Failed to load data:",e),o(String(e))}finally{d(!1)}},h=async()=>{try{let e=await n();if(!e)throw Error("Tauri API not available");let t={title:"测试框架 ".concat(new Date().toLocaleTimeString()),description:"这是一个用于验证数据持久化的测试框架"};await e("create_knowledge_framework",{framework:t}),await m()}catch(e){console.error("Failed to create test framework:",e),o(String(e))}},g=async()=>{try{let e=await n();if(!e)throw Error("Tauri API not available");let t={title:"测试模板 ".concat(new Date().toLocaleTimeString()),description:"这是一个用于验证数据持久化的测试模板",category:"测试",content:"这是测试内容，包含变量：{测试变量}",tags:["测试","验证"]};await e("create_prompt_template",{template:t}),await m()}catch(e){console.error("Failed to create test template:",e),o(String(e))}},p=async e=>{try{let t=await n();if(!t)throw Error("Tauri API not available");await t("delete_knowledge_framework",{id:e}),await m()}catch(e){console.error("Failed to delete framework:",e),o(String(e))}},j=async e=>{try{let t=await n();if(!t)throw Error("Tauri API not available");await t("delete_prompt_template",{id:e}),await m()}catch(e){console.error("Failed to delete template:",e),o(String(e))}};return c?(0,a.jsx)("div",{className:"p-6 max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{children:"正在加载数据..."})]})}):(0,a.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDCCA 数据验证页面"}),x&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,a.jsx)("p",{className:"text-red-700",children:x}),(0,a.jsx)(l.$n,{variant:"outline",size:"sm",onClick:m,className:"mt-2",children:"重新加载"})]}),(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsx)(l.$n,{onClick:h,variant:"primary",children:"创建测试框架"}),(0,a.jsx)(l.$n,{onClick:g,variant:"primary",children:"创建测试模板"}),(0,a.jsx)(l.$n,{onClick:m,variant:"outline",children:"刷新数据"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("h2",{className:"text-lg font-semibold",children:["知识框架数据 (",e.length,")"]})}),(0,a.jsx)(l.Wu,{children:0===e.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"暂无数据"}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.map(e=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["ID: ",e.id]}),(0,a.jsxs)("span",{children:["域: ",e.domain]}),(0,a.jsxs)("span",{children:["版本: v",e.version]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["创建: ",new Date(e.created_at).toLocaleString()]}),(0,a.jsxs)("span",{children:["更新: ",new Date(e.updated_at).toLocaleString()]})]})]}),(0,a.jsx)(l.$n,{variant:"outline",size:"sm",onClick:()=>p(e.id),className:"text-red-600 hover:text-red-700",children:"删除"})]})},e.id))})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("h2",{className:"text-lg font-semibold",children:["提示词模板数据 (",s.length,")"]})}),(0,a.jsx)(l.Wu,{children:0===s.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"暂无数据"}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.map(e=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e.category}),e.tags.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-200 text-gray-700 text-xs rounded-full",children:e},t))]}),(0,a.jsx)("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:(0,a.jsxs)("span",{children:["ID: ",e.id]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["创建: ",new Date(e.created_at).toLocaleString()]}),(0,a.jsxs)("span",{children:["更新: ",new Date(e.updated_at).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"mt-2 p-2 bg-white rounded text-xs",children:[(0,a.jsx)("strong",{children:"内容预览:"}),(0,a.jsxs)("div",{className:"mt-1 text-gray-600 truncate",children:[e.content.substring(0,100),e.content.length>100&&"..."]})]})]}),(0,a.jsx)(l.$n,{variant:"outline",size:"sm",onClick:()=>j(e.id),className:"text-red-600 hover:text-red-700",children:"删除"})]})},e.id))})})]})]}),(0,a.jsxs)(l.Zp,{className:"mt-6",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"数据统计"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-md",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,a.jsx)("div",{className:"text-sm text-blue-800",children:"知识框架"})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 rounded-md",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.length}),(0,a.jsx)("div",{className:"text-sm text-green-800",children:"提示词模板"})]}),(0,a.jsxs)("div",{className:"p-4 bg-purple-50 rounded-md",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.reduce((e,t)=>e+t.root_nodes.length,0)}),(0,a.jsx)("div",{className:"text-sm text-purple-800",children:"知识节点"})]}),(0,a.jsxs)("div",{className:"p-4 bg-orange-50 rounded-md",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:s.reduce((e,t)=>e+t.tags.length,0)}),(0,a.jsx)("div",{className:"text-sm text-orange-800",children:"模板标签"})]})]})})]}),(0,a.jsxs)(l.Zp,{className:"mt-6",children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"数据存储说明"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"text-sm space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"存储方式:"})," 本地JSON文件"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"存储位置:"})," 应用数据目录"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"时间戳生成:"})," 服务器端（Rust后端）自动生成"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"ID生成:"})," 服务器端基于时间戳生成唯一ID"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"数据持久化:"})," ✅ 重启应用后数据仍然存在"]}),(0,a.jsx)("p",{className:"text-green-600",children:(0,a.jsx)("strong",{children:"✅ 所有时间戳字段都由后端自动生成，前端不再发送时间戳数据"})})]})})]})]})}},2909:(e,t,s)=>{Promise.resolve().then(s.bind(s,1505))}},e=>{e.O(0,[854,162,358],()=>e(e.s=2909)),_N_E=e.O()}]);