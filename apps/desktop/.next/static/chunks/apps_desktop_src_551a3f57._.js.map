{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/components/ApiKeyManager.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { \n  Button, \n  Card, \n  Text, \n  Stack, \n  Group, \n  TextInput, \n  PasswordInput,\n  Select, \n  Badge, \n  Paper, \n  Loader,\n  Center,\n  Box,\n  Title,\n  ActionIcon,\n  Grid,\n  Divider,\n  Alert\n} from '@mantine/core';\nimport { \n  IconKey, \n  IconPlus, \n  IconTrash, \n  IconCheck, \n  IconX,\n  IconRobot,\n  IconBrain,\n  IconSettings,\n  IconTestPipe\n} from '@tabler/icons-react';\nimport { ApiKeyConfig, LLMProvider } from '@my-platform/types';\n\n// 图标映射函数\nconst getProviderIcon = (iconName: string, size = 24) => {\n  switch (iconName) {\n    case 'robot':\n      return <IconRobot size={size} />;\n    case 'brain':\n      return <IconBrain size={size} />;\n    default:\n      return <IconKey size={size} />;\n  }\n};\n\n\n// Safely import Tauri API with fallback\nconst getTauriInvoke = async () => {\n  try {\n    if (typeof window !== 'undefined' && (window as any).__TAURI__) {\n      const { invoke } = await import('@tauri-apps/api/core');\n      return invoke;\n    }\n  } catch (error) {\n    console.warn('Tauri API not available:', error);\n  }\n  return null;\n};\n\nconst LLM_PROVIDERS: LLMProvider[] = [\n  {\n    id: 'openai',\n    name: 'OpenAI',\n    description: '文本/工具调用（热门）',\n    icon: 'robot',\n    models: [\n      { id: 'gpt-4', name: 'GPT-4', contextLength: 8192 },\n      { id: 'gpt-4-turbo', name: 'GPT-4 Turbo', contextLength: 128000 },\n      { id: 'gpt-3.5-turbo', name: 'GPT-3.5 Turbo', contextLength: 4096 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'sk-...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://api.openai.com/v1' },\n    ],\n    capabilities: ['text'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'anthropic',\n    name: 'Anthropic',\n    description: '文本（Claude 系列）',\n    icon: 'brain',\n    models: [\n      { id: 'claude-3-opus-20240229', name: 'Claude 3 Opus', contextLength: 200000 },\n      { id: 'claude-3-sonnet-20240229', name: 'Claude 3 Sonnet', contextLength: 200000 },\n      { id: 'claude-3-haiku-20240307', name: 'Claude 3 Haiku', contextLength: 200000 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'sk-ant-...' },\n    ],\n    capabilities: ['text'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'google',\n    name: 'Google (Gemini)',\n    description: '文本/文生图/文生视频',\n    icon: 'robot',\n    models: [\n      { id: 'gemini-1.5-pro', name: 'Gemini 1.5 Pro', contextLength: 1000000 },\n      { id: 'gemini-1.5-flash', name: 'Gemini 1.5 Flash', contextLength: 1000000 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'AIza...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://generativelanguage.googleapis.com/v1beta' },\n    ],\n    capabilities: ['text', 'image', 'video'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'openrouter',\n    name: 'OpenRouter',\n    description: '聚合文生文路由（含多家模型）',\n    icon: 'robot',\n    models: [\n      { id: 'openrouter/auto', name: 'Auto (route)', contextLength: 128000 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'sk-or-v1-...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://openrouter.ai/api/v1' },\n    ],\n    capabilities: ['text'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'stability',\n    name: 'Stability AI',\n    description: '文生图（Stable Image）',\n    icon: 'robot',\n    models: [\n      { id: 'stable-image-core', name: 'Stable Image Core', contextLength: 0 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'sk-stable-...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://api.stability.ai/v2' },\n    ],\n    capabilities: ['image'],\n    serviceType: 'image',\n  },\n  {\n    id: 'elevenlabs',\n    name: 'ElevenLabs',\n    description: '文本转语音（TTS）',\n    icon: 'robot',\n    models: [\n      { id: 'eleven_monolingual_v1', name: 'Monolingual v1', contextLength: 0 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'eleven-...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://api.elevenlabs.io/v1' },\n    ],\n    capabilities: ['audio'],\n    serviceType: 'tts',\n  },\n  {\n    id: 'qwen',\n    name: '阿里 通义千问 (Qwen)',\n    description: '文本/文生图（热门国产）',\n    icon: 'robot',\n    models: [\n      { id: 'qwen-plus', name: 'Qwen Plus', contextLength: 200000 },\n      { id: 'qwen2.5-7b-instruct', name: 'Qwen2.5 7B Instruct', contextLength: 32000 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'sk-...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://dashscope.aliyuncs.com/compatible-mode/v1' },\n    ],\n    capabilities: ['text', 'image'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'deepseek',\n    name: 'DeepSeek',\n    description: '性价比高的文本生成',\n    icon: 'robot',\n    models: [\n      { id: 'deepseek-chat', name: 'DeepSeek Chat', contextLength: 32768 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'sk-...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://api.deepseek.com' },\n    ],\n    capabilities: ['text'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'zhipu',\n    name: '智谱 GLM',\n    description: '文本/代码（国产）',\n    icon: 'robot',\n    models: [\n      { id: 'glm-4', name: 'GLM-4', contextLength: 128000 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'sk-...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://open.bigmodel.cn/api/paas/v4' },\n    ],\n    capabilities: ['text'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'moonshot',\n    name: 'Moonshot (Kimi)',\n    description: '长文本处理（国产）',\n    icon: 'robot',\n    models: [\n      { id: 'moonshot-v1-8k', name: 'moonshot v1 8k', contextLength: 8192 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'sk-...' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://api.moonshot.cn/v1' },\n    ],\n    capabilities: ['text'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'baidu',\n    name: '百度文心',\n    description: '文本/文生图（国产）',\n    icon: 'robot',\n    models: [\n      { id: 'ernie-speed', name: 'ERNIE Speed', contextLength: 32768 },\n    ],\n    requiredFields: [\n      { key: 'apiKey', label: 'API Key', type: 'password', required: true, placeholder: 'access_token' },\n      { key: 'baseUrl', label: 'Base URL (可选)', type: 'url', required: false, placeholder: 'https://aip.baidubce.com/rpc/2.0/ai_custom/v1' },\n    ],\n    capabilities: ['text', 'image'],\n    serviceType: 'llm',\n  },\n  {\n    id: 'pollinations',\n    name: 'Pollinations (兜底)',\n    description: '多模态兜底（文/图/音）',\n    icon: 'robot',\n    models: [\n      { id: 'openai', name: 'Text (openai proxy)', contextLength: 0 },\n      { id: 'image', name: 'Image', contextLength: 0 },\n      { id: 'audio', name: 'Audio', contextLength: 0 },\n    ],\n    requiredFields: [],\n    capabilities: ['text', 'image', 'audio'],\n    serviceType: 'llm',\n  },\n];\n\nexport const ApiKeyManager: React.FC = () => {\n  const [apiKeys, setApiKeys] = useState<ApiKeyConfig[]>([]);\n  const [isAddingKey, setIsAddingKey] = useState(false);\n  const [selectedProvider, setSelectedProvider] = useState<LLMProvider | null>(null);\n  const [formData, setFormData] = useState<Record<string, string>>({});\n  const [isLoading, setIsLoading] = useState(false);\n  const [testResults, setTestResults] = useState<Record<string, boolean>>({});\n  \n  useEffect(() => {\n    loadApiKeys();\n  }, []);\n\n  const loadApiKeys = async () => {\n    try {\n      const invoke = await getTauriInvoke();\n      if (!invoke) {\n        console.warn('Tauri API not available');\n        return;\n      }\n      const keys = await invoke<ApiKeyConfig[]>('get_api_keys');\n      setApiKeys(keys);\n    } catch (error) {\n      console.error('Failed to load API keys:', error);\n    }\n  };\n\n  const handleAddKey = () => {\n    setIsAddingKey(true);\n    setSelectedProvider(null);\n    setFormData({});\n  };\n\n  const handleProviderSelect = (provider: LLMProvider) => {\n    setSelectedProvider(provider);\n    setFormData({});\n  };\n\n  const handleInputChange = (key: string, value: string) => {\n    setFormData(prev => ({ ...prev, [key]: value }));\n  };\n\n  const handleTestKey = async () => {\n    if (!selectedProvider || !formData.apiKey) return;\n\n    setIsLoading(true);\n    try {\n      const invoke = await getTauriInvoke();\n      if (!invoke) {\n        alert('Tauri API 不可用，无法测试 API Key');\n        return;\n      }\n\n      const isValid = await invoke<boolean>('test_api_key', {\n        provider: selectedProvider.id,\n        apiKey: formData.apiKey,\n        baseUrl: formData.baseUrl || null,\n      });\n\n      setTestResults(prev => ({ ...prev, [selectedProvider.id]: isValid }));\n\n      if (isValid) {\n        alert('API Key 测试成功！');\n      } else {\n        alert('API Key 测试失败，请检查密钥是否正确。');\n      }\n    } catch (error) {\n      console.error('API Key test failed:', error);\n      alert(`测试失败: ${error}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSaveKey = async () => {\n    if (!selectedProvider || !formData.apiKey) return;\n\n    const invoke = await getTauriInvoke();\n    if (!invoke) {\n      alert('Tauri API 不可用，无法保存 API Key');\n      return;\n    }\n\n    const newKey: ApiKeyConfig = {\n      id: Date.now().toString(),\n      name: formData.name || `${selectedProvider.name} Key`,\n      provider: selectedProvider.id as ApiKeyConfig['provider'],\n      apiKey: formData.apiKey,\n      baseUrl: formData.baseUrl || undefined,\n      model: formData.model || selectedProvider.models[0]?.id,\n      isDefault: apiKeys.filter(k => k.provider === selectedProvider.id).length === 0,\n      isActive: true,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    };\n\n    try {\n      await invoke('save_api_key', { apiKey: newKey });\n      await loadApiKeys();\n      setIsAddingKey(false);\n      setSelectedProvider(null);\n      setFormData({});\n    } catch (error) {\n      console.error('Failed to save API key:', error);\n      alert(`保存失败: ${error}`);\n    }\n  };\n\n  const handleDeleteKey = async (keyId: string) => {\n    if (!confirm('确定要删除这个 API Key 吗？')) return;\n\n    const invoke = await getTauriInvoke();\n    if (!invoke) {\n      alert('Tauri API 不可用，无法删除 API Key');\n      return;\n    }\n\n    try {\n      await invoke('delete_api_key', { keyId });\n      await loadApiKeys();\n    } catch (error) {\n      console.error('Failed to delete API key:', error);\n      alert(`删除失败: ${error}`);\n    }\n  };\n\n  const handleToggleDefault = async (key: ApiKeyConfig) => {\n    const invoke = await getTauriInvoke();\n    if (!invoke) {\n      alert('Tauri API 不可用，无法更新 API Key');\n      return;\n    }\n\n    const updatedKey = { ...key, isDefault: !key.isDefault, updatedAt: new Date().toISOString() };\n\n    try {\n      await invoke('save_api_key', { apiKey: updatedKey });\n      await loadApiKeys();\n    } catch (error) {\n      console.error('Failed to update API key:', error);\n    }\n  };\n\n\n\n  return (\n    <Stack gap=\"lg\" p=\"md\">\n      <Group justify=\"space-between\">\n        <Group>\n          <IconKey size={28} color=\"var(--mantine-color-blue-6)\" />\n          <Box>\n            <Title order={2}>API Key 管理</Title>\n            <Text c=\"dimmed\">管理您的 AI 服务提供商 API 密钥</Text>\n          </Box>\n        </Group>\n        <Button \n          leftSection={<IconPlus size={16} />}\n          onClick={handleAddKey}\n        >\n          添加 API Key\n        </Button>\n      </Group>\n\n      {/* 现有 API Keys */}\n      <Grid>\n        {apiKeys.map((key) => {\n          const provider = LLM_PROVIDERS.find(p => p.id === key.provider);\n          return (\n            <Grid.Col key={key.id} span={{ base: 12, md: 6, lg: 4 }}>\n              <Card shadow=\"sm\" padding=\"lg\" radius=\"md\" withBorder h=\"100%\">\n                <Group justify=\"space-between\" mb=\"md\">\n                  <Group>\n                    {provider?.icon || <IconKey size={24} />}\n                    <Box>\n                      <Text fw={500}>{key.name}</Text>\n                      <Text size=\"sm\" c=\"dimmed\">{provider?.name}</Text>\n                    </Box>\n                  </Group>\n                  {key.isDefault && (\n                    <Badge variant=\"light\" color=\"blue\" size=\"sm\">\n                      默认\n                    </Badge>\n                  )}\n                </Group>\n\n                <Stack gap=\"xs\" mb=\"md\">\n                  <Group justify=\"space-between\">\n                    <Text size=\"sm\" c=\"dimmed\">API Key:</Text>\n                    <Text size=\"sm\" ff=\"monospace\">\n                      {key.apiKey.substring(0, 8)}...{key.apiKey.slice(-4)}\n                    </Text>\n                  </Group>\n                  {key.model && (\n                    <Group justify=\"space-between\">\n                      <Text size=\"sm\" c=\"dimmed\">模型:</Text>\n                      <Text size=\"sm\">{key.model}</Text>\n                    </Group>\n                  )}\n                  <Group justify=\"space-between\">\n                    <Text size=\"sm\" c=\"dimmed\">状态:</Text>\n                    <Badge \n                      variant=\"light\" \n                      color={key.isActive ? 'green' : 'gray'}\n                      size=\"sm\"\n                    >\n                      {key.isActive ? '活跃' : '禁用'}\n                    </Badge>\n                  </Group>\n                </Stack>\n\n                <Group gap=\"xs\">\n                  <Button\n                    variant=\"light\"\n                    size=\"xs\"\n                    onClick={() => handleToggleDefault(key)}\n                    style={{ flex: 1 }}\n                  >\n                    {key.isDefault ? '取消默认' : '设为默认'}\n                  </Button>\n                  <ActionIcon\n                    variant=\"light\"\n                    color=\"red\"\n                    onClick={() => handleDeleteKey(key.id)}\n                  >\n                    <IconTrash size={16} />\n                  </ActionIcon>\n                </Group>\n              </Card>\n            </Grid.Col>\n          );\n        })}\n      </Grid>\n\n      {/* 添加新 API Key 对话框 */}\n      {isAddingKey && (\n        <Card shadow=\"sm\" padding=\"lg\" radius=\"md\" withBorder>\n          <Title order={3} mb=\"md\">添加新的 API Key</Title>\n          \n          {!selectedProvider ? (\n            <Stack gap=\"md\">\n              <Text c=\"dimmed\">选择 AI 服务提供商：</Text>\n              <Grid>\n                {LLM_PROVIDERS.map((provider) => (\n                  <Grid.Col key={provider.id} span={{ base: 12, sm: 6 }}>\n                    <Paper\n                      p=\"md\"\n                      withBorder\n                      style={{ cursor: 'pointer' }}\n                      onClick={() => handleProviderSelect(provider)}\n                      className=\"hover:shadow-md transition-shadow\"\n                    >\n                      <Group>\n                        {getProviderIcon(provider.icon)}\n                        <Box>\n                          <Text fw={500}>{provider.name}</Text>\n                          <Text size=\"sm\" c=\"dimmed\">{provider.description}</Text>\n                        </Box>\n                      </Group>\n                    </Paper>\n                  </Grid.Col>\n                ))}\n              </Grid>\n            </Stack>\n          ) : (\n            <Stack gap=\"md\">\n              <Group mb=\"md\">\n                {getProviderIcon(selectedProvider.icon)}\n                <Box>\n                  <Text fw={500}>{selectedProvider.name}</Text>\n                  <Text size=\"sm\" c=\"dimmed\">{selectedProvider.description}</Text>\n                </Box>\n              </Group>\n\n              <TextInput\n                label=\"配置名称\"\n                placeholder={`${selectedProvider.name} 配置`}\n                value={formData.name || ''}\n                onChange={(e) => handleInputChange('name', e.currentTarget.value)}\n              />\n\n              {selectedProvider.requiredFields.map((field) => (\n                <Box key={field.key}>\n                  {field.type === 'password' ? (\n                    <PasswordInput\n                      label={\n                        <Group gap=\"xs\">\n                          <Text>{field.label}</Text>\n                          {field.required && <Text c=\"red\">*</Text>}\n                        </Group>\n                      }\n                      placeholder={field.placeholder}\n                      value={formData[field.key] || ''}\n                      onChange={(e) => handleInputChange(field.key, e.currentTarget.value)}\n                      required={field.required}\n                    />\n                  ) : (\n                    <TextInput\n                      label={\n                        <Group gap=\"xs\">\n                          <Text>{field.label}</Text>\n                          {field.required && <Text c=\"red\">*</Text>}\n                        </Group>\n                      }\n                      type={field.type}\n                      placeholder={field.placeholder}\n                      value={formData[field.key] || ''}\n                      onChange={(e) => handleInputChange(field.key, e.currentTarget.value)}\n                      required={field.required}\n                    />\n                  )}\n                  {field.description && (\n                    <Text size=\"xs\" c=\"dimmed\" mt=\"xs\">{field.description}</Text>\n                  )}\n                </Box>\n              ))}\n\n              <Select\n                label=\"默认模型\"\n                value={formData.model || selectedProvider.models[0]?.id || ''}\n                onChange={(value) => handleInputChange('model', value || '')}\n                data={selectedProvider.models.map((model) => ({\n                  value: model.id,\n                  label: model.name\n                }))}\n              />\n\n              <Group justify=\"flex-end\" mt=\"md\">\n                <Button\n                  variant=\"subtle\"\n                  onClick={() => {\n                    setIsAddingKey(false);\n                    setSelectedProvider(null);\n                    setFormData({});\n                  }}\n                >\n                  取消\n                </Button>\n                <Button\n                  variant=\"light\"\n                  leftSection={<IconTestPipe size={16} />}\n                  onClick={handleTestKey}\n                  disabled={!formData.apiKey || isLoading}\n                  loading={isLoading}\n                >\n                  测试连接\n                </Button>\n                <Button\n                  onClick={handleSaveKey}\n                  disabled={!formData.apiKey}\n                >\n                  保存\n                </Button>\n              </Group>\n            </Stack>\n          )}\n        </Card>\n      )}\n\n      {apiKeys.length === 0 && !isAddingKey && (\n        <Card shadow=\"sm\" padding=\"xl\" radius=\"md\" withBorder>\n          <Center>\n            <Stack align=\"center\" gap=\"md\">\n              <IconKey size={64} color=\"var(--mantine-color-gray-5)\" />\n              <Title order={3} ta=\"center\">还没有 API Key</Title>\n              <Text c=\"dimmed\" ta=\"center\" maw={400}>\n                添加您的第一个 AI 服务提供商 API Key 来开始使用\n              </Text>\n              <Button \n                leftSection={<IconPlus size={16} />}\n                onClick={handleAddKey}\n              >\n                添加 API Key\n              </Button>\n            </Stack>\n          </Center>\n        </Card>\n      )}\n    </Stack>\n  );\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1331, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/components/layout/PageLayout.tsx"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\nimport {\n  Stack,\n  Group,\n  Title,\n  Text,\n  Button,\n  ActionIcon,\n  Box,\n  Breadcrumbs,\n  Anchor\n} from '@mantine/core';\nimport { IconArrowLeft, IconHome } from '@tabler/icons-react';\n\ninterface PageLayoutProps {\n  title: string;\n  description?: string;\n  icon?: React.ReactNode;\n  breadcrumbs?: Array<{ label: string; href?: string }>;\n  actions?: React.ReactNode;\n  onBack?: () => void;\n  children: React.ReactNode;\n}\n\nexport const PageLayout: React.FC<PageLayoutProps> = ({\n  title,\n  description,\n  icon,\n  breadcrumbs,\n  actions,\n  onBack,\n  children\n}) => {\n  return (\n    <Stack gap=\"lg\" p=\"md\" h=\"100%\">\n      {/* 面包屑导航 */}\n      {breadcrumbs && breadcrumbs.length > 0 && (\n        <Breadcrumbs separator=\">\">\n          {breadcrumbs.map((crumb, index) => (\n            <Anchor\n              key={index}\n              href={crumb.href}\n              size=\"sm\"\n              c=\"dimmed\"\n              style={{ textDecoration: 'none' }}\n            >\n              {index === 0 && <IconHome size={14} style={{ marginRight: 4 }} />}\n              {crumb.label}\n            </Anchor>\n          ))}\n        </Breadcrumbs>\n      )}\n\n      {/* 页面头部 */}\n      <Group justify=\"space-between\" align=\"flex-start\">\n        <Group align=\"flex-start\">\n          {onBack && (\n            <ActionIcon\n              variant=\"light\"\n              size=\"lg\"\n              onClick={onBack}\n              style={{ marginTop: 4 }}\n            >\n              <IconArrowLeft size={18} />\n            </ActionIcon>\n          )}\n          \n          <Group align=\"flex-start\">\n            {icon && (\n              <Box style={{ marginTop: 2 }}>\n                {icon}\n              </Box>\n            )}\n            <Box>\n              <Title order={2} mb={description ? 4 : 0}>\n                {title}\n              </Title>\n              {description && (\n                <Text c=\"dimmed\" size=\"sm\">\n                  {description}\n                </Text>\n              )}\n            </Box>\n          </Group>\n        </Group>\n        \n        {actions && (\n          <Group>\n            {actions}\n          </Group>\n        )}\n      </Group>\n\n      {/* 页面内容 */}\n      <Box style={{ flex: 1, overflow: 'auto' }}>\n        {children}\n      </Box>\n    </Stack>\n  );\n};"],"names":[],"mappings":";;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAdA;;;;AA0BO,MAAM,aAAwC;QAAC,EACpD,KAAK,EACL,WAAW,EACX,IAAI,EACJ,WAAW,EACX,OAAO,EACP,MAAM,EACN,QAAQ,EACT;IACC,qBACE,8VAAC,sZAAA,CAAA,QAAK;QAAC,KAAI;QAAK,GAAE;QAAK,GAAE;;YAEtB,eAAe,YAAY,MAAM,GAAG,mBACnC,8VAAC,kaAAA,CAAA,cAAW;gBAAC,WAAU;0BACpB,YAAY,GAAG,CAAC,CAAC,OAAO,sBACvB,8VAAC,wZAAA,CAAA,SAAM;wBAEL,MAAM,MAAM,IAAI;wBAChB,MAAK;wBACL,GAAE;wBACF,OAAO;4BAAE,gBAAgB;wBAAO;;4BAE/B,UAAU,mBAAK,8VAAC,uTAAA,CAAA,WAAQ;gCAAC,MAAM;gCAAI,OAAO;oCAAE,aAAa;gCAAE;;;;;;4BAC3D,MAAM,KAAK;;uBAPP;;;;;;;;;;0BAcb,8VAAC,sZAAA,CAAA,QAAK;gBAAC,SAAQ;gBAAgB,OAAM;;kCACnC,8VAAC,sZAAA,CAAA,QAAK;wBAAC,OAAM;;4BACV,wBACC,8VAAC,gaAAA,CAAA,aAAU;gCACT,SAAQ;gCACR,MAAK;gCACL,SAAS;gCACT,OAAO;oCAAE,WAAW;gCAAE;0CAEtB,cAAA,8VAAC,iUAAA,CAAA,gBAAa;oCAAC,MAAM;;;;;;;;;;;0CAIzB,8VAAC,sZAAA,CAAA,QAAK;gCAAC,OAAM;;oCACV,sBACC,8VAAC,4YAAA,CAAA,MAAG;wCAAC,OAAO;4CAAE,WAAW;wCAAE;kDACxB;;;;;;kDAGL,8VAAC,4YAAA,CAAA,MAAG;;0DACF,8VAAC,sZAAA,CAAA,QAAK;gDAAC,OAAO;gDAAG,IAAI,cAAc,IAAI;0DACpC;;;;;;4CAEF,6BACC,8VAAC,oZAAA,CAAA,OAAI;gDAAC,GAAE;gDAAS,MAAK;0DACnB;;;;;;;;;;;;;;;;;;;;;;;;oBAOV,yBACC,8VAAC,sZAAA,CAAA,QAAK;kCACH;;;;;;;;;;;;0BAMP,8VAAC,4YAAA,CAAA,MAAG;gBAAC,OAAO;oBAAE,MAAM;oBAAG,UAAU;gBAAO;0BACrC;;;;;;;;;;;;AAIT;KA3Ea","debugId":null}},
    {"offset": {"line": 1508, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/components/SettingsManager.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  Stack,\n  Group,\n  Title,\n  Text,\n  Button,\n  Card,\n  Select,\n  NumberInput,\n  Slider,\n  Switch,\n  Divider,\n  Box,\n  Alert,\n  ActionIcon\n} from '@mantine/core';\nimport {\n  IconSettings,\n  IconPalette,\n  IconRobot,\n  IconDatabase,\n  IconDownload,\n  IconUpload,\n  IconTrash,\n  IconInfoCircle\n} from '@tabler/icons-react';\nimport { notifications } from '@mantine/notifications';\nimport { AppSettings } from '@my-platform/types';\nimport { PageLayout } from './layout/PageLayout';\n\n\n// Safely import Tauri API with fallback\nconst getTauriInvoke = async () => {\n  try {\n    if (typeof window !== 'undefined' && (window as any).__TAURI__) {\n      const { invoke } = await import('@tauri-apps/api/core');\n      return invoke;\n    }\n  } catch (error) {\n    console.warn('Tauri API not available:', error);\n  }\n  return null;\n};\n\nexport const SettingsManager: React.FC = () => {\n  const [settings, setSettings] = useState<AppSettings>({\n    theme: 'system',\n    language: 'zh-CN',\n    autoSave: true,\n    defaultProvider: '',\n    maxTokens: 4000,\n    temperature: 0.7,\n    enableTelemetry: false,\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSaved, setIsSaved] = useState(false);\n  \n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const invoke = await getTauriInvoke();\n      if (!invoke) {\n        console.warn('Tauri API not available, using default settings');\n        return;\n      }\n      const loadedSettings = await invoke<AppSettings>('get_settings');\n      setSettings(loadedSettings);\n    } catch (error) {\n      console.error('Failed to load settings:', error);\n    }\n  };\n\n  const handleSaveSettings = async () => {\n    const invoke = await getTauriInvoke();\n    if (!invoke) {\n      alert('Tauri API 不可用，无法保存设置');\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      await invoke('save_settings', { settings });\n      setIsSaved(true);\n      setTimeout(() => setIsSaved(false), 2000);\n    } catch (error) {\n      console.error('Failed to save settings:', error);\n      alert(`保存失败: ${error}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSettingChange = (key: keyof AppSettings, value: any) => {\n    setSettings(prev => ({ ...prev, [key]: value }));\n  };\n\n\n\n  const handleSaveSettingsWithNotification = async () => {\n    await handleSaveSettings();\n    if (!isLoading) {\n      notifications.show({\n        title: '保存成功',\n        message: '设置已保存',\n        color: 'green'\n      });\n    }\n  };\n\n  return (\n    <PageLayout\n      title=\"应用设置\"\n      description=\"自定义您的应用体验\"\n      icon={<IconSettings size={28} color=\"var(--mantine-color-blue-6)\" />}\n      actions={\n        <Button\n          onClick={handleSaveSettingsWithNotification}\n          loading={isLoading}\n          color={isSaved ? 'green' : 'blue'}\n        >\n          {isSaved ? '已保存' : '保存设置'}\n        </Button>\n      }\n    >\n      <Stack gap=\"lg\">\n        {/* 外观设置 */}\n        <Card shadow=\"sm\" padding=\"lg\" radius=\"md\" withBorder>\n          <Stack gap=\"md\">\n            <Group>\n              <IconPalette size={20} color=\"var(--mantine-color-blue-6)\" />\n              <Title order={4}>外观设置</Title>\n            </Group>\n            \n            <Divider />\n            \n            <Select\n              label=\"主题\"\n              description=\"选择应用的外观主题\"\n              value={settings.theme}\n              onChange={(value) => handleSettingChange('theme', value || 'system')}\n              data={[\n                { value: 'light', label: '浅色' },\n                { value: 'dark', label: '深色' },\n                { value: 'system', label: '跟随系统' }\n              ]}\n            />\n            \n            <Select\n              label=\"语言\"\n              description=\"选择应用界面语言\"\n              value={settings.language}\n              onChange={(value) => handleSettingChange('language', value || 'zh-CN')}\n              data={[\n                { value: 'zh-CN', label: '简体中文' },\n                { value: 'en-US', label: 'English' }\n              ]}\n            />\n          </Stack>\n        </Card>\n\n        {/* AI 配置 */}\n        <Card shadow=\"sm\" padding=\"lg\" radius=\"md\" withBorder>\n          <Stack gap=\"md\">\n            <Group>\n              <IconRobot size={20} color=\"var(--mantine-color-green-6)\" />\n              <Title order={4}>AI 配置</Title>\n            </Group>\n            \n            <Divider />\n            \n            <NumberInput\n              label=\"最大 Token 数量\"\n              description=\"控制 AI 响应的最大长度，较高的值会消耗更多 token\"\n              value={settings.maxTokens}\n              onChange={(value) => handleSettingChange('maxTokens', value || 4000)}\n              min={100}\n              max={32000}\n              step={100}\n            />\n            \n            <Box>\n              <Text size=\"sm\" fw={500} mb=\"xs\">\n                温度 (Temperature): {settings.temperature}\n              </Text>\n              <Slider\n                value={settings.temperature}\n                onChange={(value) => handleSettingChange('temperature', value)}\n                min={0}\n                max={2}\n                step={0.1}\n                marks={[\n                  { value: 0, label: '保守' },\n                  { value: 1, label: '平衡' },\n                  { value: 2, label: '创造性' }\n                ]}\n              />\n              <Text size=\"xs\" c=\"dimmed\" mt=\"xs\">\n                控制 AI 响应的随机性和创造性\n              </Text>\n            </Box>\n          </Stack>\n        </Card>\n\n        {/* 行为设置 */}\n        <Card shadow=\"sm\" padding=\"lg\" radius=\"md\" withBorder>\n          <Stack gap=\"md\">\n            <Group>\n              <IconSettings size={20} color=\"var(--mantine-color-orange-6)\" />\n              <Title order={4}>行为设置</Title>\n            </Group>\n            \n            <Divider />\n            \n            <Group justify=\"space-between\">\n              <Box>\n                <Text size=\"sm\" fw={500}>自动保存</Text>\n                <Text size=\"xs\" c=\"dimmed\">自动保存聊天记录和设置</Text>\n              </Box>\n              <Switch\n                checked={settings.autoSave}\n                onChange={(e) => handleSettingChange('autoSave', e.currentTarget.checked)}\n              />\n            </Group>\n            \n            <Group justify=\"space-between\">\n              <Box>\n                <Text size=\"sm\" fw={500}>启用遥测</Text>\n                <Text size=\"xs\" c=\"dimmed\">帮助改进应用体验（匿名数据）</Text>\n              </Box>\n              <Switch\n                checked={settings.enableTelemetry}\n                onChange={(e) => handleSettingChange('enableTelemetry', e.currentTarget.checked)}\n              />\n            </Group>\n          </Stack>\n        </Card>\n\n        {/* 数据管理 */}\n        <Card shadow=\"sm\" padding=\"lg\" radius=\"md\" withBorder>\n          <Stack gap=\"md\">\n            <Group>\n              <IconDatabase size={20} color=\"var(--mantine-color-violet-6)\" />\n              <Title order={4}>数据管理</Title>\n            </Group>\n            \n            <Divider />\n            \n            <Alert icon={<IconInfoCircle size={16} />} color=\"blue\" variant=\"light\">\n              <Text size=\"sm\">\n                数据管理功能可以帮助您备份和恢复应用数据\n              </Text>\n            </Alert>\n            \n            <Group justify=\"space-between\">\n              <Box>\n                <Text size=\"sm\" fw={500}>导出数据</Text>\n                <Text size=\"xs\" c=\"dimmed\">导出您的聊天记录和设置</Text>\n              </Box>\n              <Button\n                variant=\"light\"\n                leftSection={<IconDownload size={16} />}\n                size=\"sm\"\n              >\n                导出\n              </Button>\n            </Group>\n            \n            <Group justify=\"space-between\">\n              <Box>\n                <Text size=\"sm\" fw={500}>导入数据</Text>\n                <Text size=\"xs\" c=\"dimmed\">从备份文件恢复数据</Text>\n              </Box>\n              <Button\n                variant=\"light\"\n                leftSection={<IconUpload size={16} />}\n                size=\"sm\"\n              >\n                导入\n              </Button>\n            </Group>\n            \n            <Divider />\n            \n            <Group justify=\"space-between\">\n              <Box>\n                <Text size=\"sm\" fw={500} c=\"red\">清除所有数据</Text>\n                <Text size=\"xs\" c=\"dimmed\">删除所有聊天记录、API Key 和设置</Text>\n              </Box>\n              <Button\n                variant=\"light\"\n                color=\"red\"\n                leftSection={<IconTrash size={16} />}\n                size=\"sm\"\n                onClick={() => {\n                  if (confirm('确定要清除所有数据吗？此操作不可恢复！')) {\n                    // TODO: 实现清除数据功能\n                    notifications.show({\n                      title: '功能开发中',\n                      message: '此功能正在开发中...',\n                      color: 'orange'\n                    });\n                  }\n                }}\n              >\n                清除\n              </Button>\n            </Group>\n          </Stack>\n        </Card>\n      </Stack>\n    </PageLayout>\n  );\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2256, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/components/ChatInterface.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { \n  Button, \n  Card, \n  Text, \n  Stack, \n  Group, \n  Select, \n  Textarea, \n  Paper, \n  Loader,\n  Center,\n  Box,\n  Title,\n  Badge,\n  ActionIcon,\n  ScrollArea\n} from '@mantine/core';\nimport { \n  IconRobot, \n  IconSend, \n  IconTrash, \n  IconUser,\n  IconSettings,\n  IconMessageCircle\n} from '@tabler/icons-react';\nimport { ApiKeyConfig, ChatMessage } from '@my-platform/types';\n\n\n// Safely import Tauri API with fallback\nconst getTauriInvoke = async () => {\n  try {\n    if (typeof window !== 'undefined' && (window as any).__TAURI__) {\n      const { invoke } = await import('@tauri-apps/api/core');\n      return invoke;\n    }\n  } catch (error) {\n    console.warn('Tauri API not available:', error);\n  }\n  return null;\n};\n\nexport const ChatInterface: React.FC = () => {\n  const [apiKeys, setApiKeys] = useState<ApiKeyConfig[]>([]);\n  const [selectedKey, setSelectedKey] = useState<ApiKeyConfig | null>(null);\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    loadApiKeys();\n  }, []);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const loadApiKeys = async () => {\n    try {\n      const invoke = await getTauriInvoke();\n      if (!invoke) {\n        console.warn('Tauri API not available, using mock data');\n        // Provide mock data for web development\n        const mockKeys: ApiKeyConfig[] = [\n          {\n            id: 'mock-1',\n            name: 'Mock OpenAI',\n            provider: 'openai',\n            apiKey: 'mock-key',\n            baseUrl: undefined,\n            model: 'gpt-3.5-turbo',\n            isDefault: true,\n            isActive: true,\n            createdAt: new Date().toISOString(),\n            updatedAt: new Date().toISOString(),\n          }\n        ];\n        setApiKeys(mockKeys);\n        setSelectedKey(mockKeys[0]);\n        return;\n      }\n\n      const keys = await invoke<ApiKeyConfig[]>('get_api_keys');\n      setApiKeys(keys);\n\n      // 选择默认的 API Key\n      const defaultKey = keys.find(k => k.isDefault && k.isActive);\n      if (defaultKey) {\n        setSelectedKey(defaultKey);\n      } else if (keys.length > 0) {\n        setSelectedKey(keys[0]);\n      }\n    } catch (error) {\n      console.error('Failed to load API keys:', error);\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSendMessage = async () => {\n    if (!inputMessage.trim() || !selectedKey || isLoading) return;\n\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: inputMessage.trim(),\n      timestamp: new Date().toISOString(),\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputMessage('');\n    setIsLoading(true);\n\n    try {\n      const invoke = await getTauriInvoke();\n      let response: string;\n\n      if (!invoke) {\n        // Mock response for web development\n        await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate delay\n        response = `这是一个模拟回复，因为 Tauri API 不可用。您的消息是：\"${userMessage.content}\"`;\n      } else {\n        // 准备消息历史\n        const messageHistory = [...messages, userMessage].map(msg => ({\n          role: msg.role,\n          content: msg.content,\n        }));\n\n        response = await invoke<string>('chat_with_ai', {\n          provider: selectedKey.provider,\n          apiKey: selectedKey.apiKey,\n          model: selectedKey.model || 'gpt-3.5-turbo',\n          messages: messageHistory,\n          baseUrl: selectedKey.baseUrl || null,\n        });\n      }\n\n      const assistantMessage: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: response,\n        timestamp: new Date().toISOString(),\n        model: selectedKey.model,\n      };\n\n      setMessages(prev => [...prev, assistantMessage]);\n    } catch (error) {\n      console.error('Chat failed:', error);\n      const errorMessage: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        role: 'assistant',\n        content: `抱歉，发生了错误：${error}`,\n        timestamp: new Date().toISOString(),\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const clearChat = () => {\n    if (confirm('确定要清除聊天记录吗？')) {\n      setMessages([]);\n    }\n  };\n\n  if (apiKeys.length === 0) {\n    return (\n      <Box p=\"lg\">\n        <Card shadow=\"sm\" padding=\"xl\" radius=\"md\" withBorder>\n          <Center>\n            <Stack align=\"center\" gap=\"md\">\n              <IconRobot size={64} color=\"var(--mantine-color-gray-5)\" />\n              <Title order={3} ta=\"center\">需要配置 API Key</Title>\n              <Text c=\"dimmed\" ta=\"center\" maw={400}>\n                请先在 API Key 管理页面添加至少一个 AI 服务提供商的密钥\n              </Text>\n              <Button leftSection={<IconSettings size={16} />}>\n                前往配置\n              </Button>\n            </Stack>\n          </Center>\n        </Card>\n      </Box>\n    );\n  }\n\n  return (\n    <Stack h=\"100vh\" gap={0}>\n      {/* 顶部工具栏 */}\n      <Paper p=\"md\" shadow=\"sm\" withBorder>\n        <Group justify=\"space-between\">\n          <Group>\n            <IconMessageCircle size={24} color=\"var(--mantine-color-blue-6)\" />\n            <Title order={3}>AI 聊天</Title>\n            <Select\n              placeholder=\"选择 API Key\"\n              value={selectedKey?.id || null}\n              onChange={(value) => {\n                const key = apiKeys.find(k => k.id === value);\n                setSelectedKey(key || null);\n              }}\n              data={apiKeys.map((key) => ({\n                value: key.id,\n                label: `${key.name} (${key.provider})`\n              }))}\n              w={250}\n            />\n          </Group>\n          <ActionIcon\n            variant=\"light\"\n            color=\"red\"\n            onClick={clearChat}\n            disabled={messages.length === 0}\n          >\n            <IconTrash size={16} />\n          </ActionIcon>\n        </Group>\n      </Paper>\n\n      {/* 聊天消息区域 */}\n      <ScrollArea style={{ flex: 1 }} p=\"md\" bg=\"gray.0\">\n        {messages.length === 0 ? (\n          <Center h=\"100%\">\n            <Stack align=\"center\" gap=\"md\">\n              <IconMessageCircle size={64} color=\"var(--mantine-color-gray-5)\" />\n              <Title order={3} ta=\"center\">开始对话</Title>\n              <Text c=\"dimmed\" ta=\"center\" maw={400}>\n                向 AI 提问任何问题，开始您的智能对话\n              </Text>\n            </Stack>\n          </Center>\n        ) : (\n          <Stack gap=\"md\">\n            {messages.map((message) => (\n              <Group\n                key={message.id}\n                justify={message.role === 'user' ? 'flex-end' : 'flex-start'}\n                align=\"flex-start\"\n              >\n                <Paper\n                  p=\"md\"\n                  radius=\"lg\"\n                  shadow=\"sm\"\n                  style={{\n                    maxWidth: '70%',\n                    backgroundColor: message.role === 'user' \n                      ? 'var(--mantine-color-blue-6)' \n                      : 'white',\n                    color: message.role === 'user' ? 'white' : 'inherit'\n                  }}\n                >\n                  <Text style={{ whiteSpace: 'pre-wrap' }}>\n                    {message.content}\n                  </Text>\n                  <Group justify=\"space-between\" mt=\"xs\">\n                    <Text \n                      size=\"xs\" \n                      c={message.role === 'user' ? 'blue.1' : 'dimmed'}\n                    >\n                      {new Date(message.timestamp).toLocaleTimeString()}\n                    </Text>\n                    {message.model && (\n                      <Badge size=\"xs\" variant=\"light\">\n                        {message.model}\n                      </Badge>\n                    )}\n                  </Group>\n                </Paper>\n              </Group>\n            ))}\n            \n            {isLoading && (\n              <Group justify=\"flex-start\">\n                <Paper p=\"md\" radius=\"lg\" shadow=\"sm\" bg=\"white\">\n                  <Group gap=\"sm\">\n                    <Loader size=\"sm\" />\n                    <Text c=\"dimmed\">AI 正在思考...</Text>\n                  </Group>\n                </Paper>\n              </Group>\n            )}\n            <div ref={messagesEndRef} />\n          </Stack>\n        )}\n      </ScrollArea>\n\n      {/* 输入区域 */}\n      <Paper p=\"md\" shadow=\"sm\" withBorder>\n        <Stack gap=\"xs\">\n          <Group align=\"flex-end\" gap=\"sm\">\n            <Textarea\n              value={inputMessage}\n              onChange={(e) => setInputMessage(e.currentTarget.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"输入您的消息... (Shift+Enter 换行，Enter 发送)\"\n              autosize\n              minRows={1}\n              maxRows={4}\n              style={{ flex: 1 }}\n              radius=\"md\"\n            />\n            <Button\n              onClick={handleSendMessage}\n              disabled={!inputMessage.trim() || !selectedKey || isLoading}\n              loading={isLoading}\n              leftSection={<IconSend size={16} />}\n            >\n              发送\n            </Button>\n          </Group>\n          \n          {selectedKey && (\n            <Text size=\"xs\" c=\"dimmed\">\n              使用 {selectedKey.name} ({selectedKey.model || 'default'})\n            </Text>\n          )}\n        </Stack>\n      </Paper>\n    </Stack>\n  );\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2864, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/components/ProfileManager.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { \n  Container, \n  Paper, \n  Title, \n  Text, \n  Group, \n  Avatar, \n  Button, \n  Grid, \n  Card, \n  Stack, \n  Divider,\n  Badge,\n  ActionIcon,\n  Box,\n  SimpleGrid,\n  Alert,\n  Loader,\n  Center\n} from '@mantine/core';\nimport { \n  IconUser, \n  IconLogout, \n  IconKey, \n  IconSettings, \n  IconTemplate, \n  IconBrain,\n  IconMail,\n  IconCalendar,\n  IconShield,\n  IconInfoCircle\n} from '@tabler/icons-react';\nimport { notifications } from '@mantine/notifications';\nimport { useAuth } from '@/hooks/useAuth';\n\nexport const ProfileManager: React.FC = () => {\n  const { user, logout, isLoading } = useAuth();\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\n\n  const handleLogout = async () => {\n    if (isLoggingOut) return;\n    \n    try {\n      setIsLoggingOut(true);\n      await logout();\n      notifications.show({\n        title: '退出成功',\n        message: '您已安全退出登录',\n        color: 'green',\n      });\n    } catch (error) {\n      console.error('Logout failed:', error);\n      notifications.show({\n        title: '退出失败',\n        message: '退出登录失败，请稍后重试',\n        color: 'red',\n      });\n    } finally {\n      setIsLoggingOut(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Center h=\"100vh\">\n        <Stack align=\"center\">\n          <Loader size=\"lg\" />\n          <Text c=\"dimmed\">加载用户信息...</Text>\n        </Stack>\n      </Center>\n    );\n  }\n\n  return (\n    <Container size=\"lg\" py=\"xl\">\n      <Stack gap=\"xl\">\n        {/* 页面标题 */}\n        <Group>\n          <IconUser size={32} color=\"#228be6\" />\n          <Box>\n            <Title order={2}>个人中心</Title>\n            <Text c=\"dimmed\" size=\"sm\">管理您的账户信息和偏好设置</Text>\n          </Box>\n        </Group>\n\n        {/* 用户信息卡片 */}\n        <Paper shadow=\"xs\" p=\"xl\" radius=\"md\" className=\"flat-card\">\n          <Group>\n            <Avatar \n              size={80} \n              radius=\"md\" \n              src={user?.avatar}\n              color=\"blue\"\n            >\n              <IconUser size={40} />\n            </Avatar>\n            <Stack gap=\"xs\" flex={1}>\n              <Title order={3}>{user?.name || '未设置姓名'}</Title>\n              <Group gap=\"xs\">\n                <IconMail size={16} />\n                <Text c=\"dimmed\">{user?.email}</Text>\n              </Group>\n              <Group gap=\"md\">\n                <Badge variant=\"light\" color=\"blue\" leftSection={<IconShield size={12} />}>\n                  已验证用户\n                </Badge>\n                <Badge variant=\"light\" color=\"green\">\n                  桌面应用\n                </Badge>\n              </Group>\n            </Stack>\n          </Group>\n        </Paper>\n\n        {/* 统计信息 */}\n        <SimpleGrid cols={{ base: 1, sm: 3 }} spacing=\"md\">\n          <Card shadow=\"xs\" padding=\"lg\" radius=\"md\" className=\"flat-card\">\n            <Group justify=\"space-between\">\n              <Box>\n                <Text c=\"dimmed\" size=\"sm\">使用天数</Text>\n                <Text size=\"xl\" fw={700} c=\"blue\">--</Text>\n              </Box>\n              <IconCalendar size={24} color=\"#228be6\" />\n            </Group>\n          </Card>\n          \n          <Card shadow=\"xs\" padding=\"lg\" radius=\"md\" className=\"flat-card\">\n            <Group justify=\"space-between\">\n              <Box>\n                <Text c=\"dimmed\" size=\"sm\">创建的模板</Text>\n                <Text size=\"xl\" fw={700} c=\"green\">--</Text>\n              </Box>\n              <IconTemplate size={24} color=\"#40c057\" />\n            </Group>\n          </Card>\n          \n          <Card shadow=\"xs\" padding=\"lg\" radius=\"md\" className=\"flat-card\">\n            <Group justify=\"space-between\">\n              <Box>\n                <Text c=\"dimmed\" size=\"sm\">知识框架</Text>\n                <Text size=\"xl\" fw={700} c=\"violet\">--</Text>\n              </Box>\n              <IconBrain size={24} color=\"#7c3aed\" />\n            </Group>\n          </Card>\n        </SimpleGrid>\n\n        {/* 快速操作 */}\n        <Paper shadow=\"xs\" p=\"xl\" radius=\"md\" className=\"flat-card\">\n          <Title order={4} mb=\"md\">快速操作</Title>\n          <SimpleGrid cols={{ base: 1, sm: 2 }} spacing=\"md\">\n            <Button \n              variant=\"light\" \n              leftSection={<IconKey size={18} />}\n              justify=\"start\"\n              className=\"flat-button\"\n            >\n              管理 API 密钥\n            </Button>\n            <Button \n              variant=\"light\" \n              leftSection={<IconSettings size={18} />}\n              justify=\"start\"\n              className=\"flat-button\"\n            >\n              应用设置\n            </Button>\n            <Button \n              variant=\"light\" \n              leftSection={<IconTemplate size={18} />}\n              justify=\"start\"\n              className=\"flat-button\"\n            >\n              我的模板\n            </Button>\n            <Button \n              variant=\"light\" \n              leftSection={<IconBrain size={18} />}\n              justify=\"start\"\n              className=\"flat-button\"\n            >\n              我的框架\n            </Button>\n          </SimpleGrid>\n        </Paper>\n\n        {/* 系统信息 */}\n        <Paper shadow=\"xs\" p=\"xl\" radius=\"md\" className=\"flat-card\">\n          <Title order={4} mb=\"md\">系统信息</Title>\n          <Stack gap=\"sm\">\n            <Group justify=\"space-between\">\n              <Text c=\"dimmed\">应用版本</Text>\n              <Badge variant=\"outline\">v0.2.0</Badge>\n            </Group>\n            <Group justify=\"space-between\">\n              <Text c=\"dimmed\">平台</Text>\n              <Badge variant=\"outline\" color=\"blue\">Tauri Desktop</Badge>\n            </Group>\n            <Group justify=\"space-between\">\n              <Text c=\"dimmed\">环境</Text>\n              <Badge \n                variant=\"outline\" \n                color={process.env.NODE_ENV === 'development' ? 'orange' : 'green'}\n              >\n                {process.env.NODE_ENV === 'development' ? '开发环境' : '生产环境'}\n              </Badge>\n            </Group>\n            <Group justify=\"space-between\">\n              <Text c=\"dimmed\">最后登录</Text>\n              <Text size=\"sm\">刚刚</Text>\n            </Group>\n          </Stack>\n        </Paper>\n\n        {/* 账户操作 */}\n        <Alert \n          icon={<IconInfoCircle size={16} />} \n          title=\"账户操作\" \n          color=\"red\"\n          variant=\"light\"\n          radius=\"md\"\n        >\n          <Group justify=\"space-between\" mt=\"md\">\n            <Box>\n              <Text fw={500}>退出登录</Text>\n              <Text size=\"sm\" c=\"dimmed\">\n                退出当前账户，需要重新登录才能使用应用\n              </Text>\n            </Box>\n            <Button\n              color=\"red\"\n              variant=\"light\"\n              leftSection={<IconLogout size={16} />}\n              onClick={handleLogout}\n              loading={isLoggingOut}\n              className=\"flat-button\"\n            >\n              {isLoggingOut ? '退出中...' : '退出登录'}\n            </Button>\n          </Group>\n        </Alert>\n\n        {/* 帮助信息 */}\n        <Paper p=\"md\" radius=\"md\" bg=\"gray.0\">\n          <Text ta=\"center\" size=\"sm\" c=\"dimmed\">\n            如果您遇到任何问题，请联系技术支持\n          </Text>\n          <Text ta=\"center\" size=\"sm\" mt=\"xs\">\n            <Text \n              component=\"a\" \n              href=\"mailto:support@aiplatform.com\" \n              c=\"blue\"\n              td=\"none\"\n              style={{ cursor: 'pointer' }}\n            >\n              support@aiplatform.com\n            </Text>\n          </Text>\n        </Paper>\n      </Stack>\n    </Container>\n  );\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3674, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/data/builtInFrameworks.ts"],"sourcesContent":["import { KnowledgeFramework } from '@my-platform/types';\n\nexport const builtInFrameworks: KnowledgeFramework[] = [\n  {\n    id: 'office-productivity',\n    name: '办公效率',\n    description: '现代办公环境下的效率提升方法和工具',\n    domain: 'office',\n    version: 1,\n    isBuiltIn: true,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    rootNodes: [\n      {\n        id: 'time-management',\n        title: '时间管理',\n        description: '有效管理时间，提升工作效率',\n        level: 0,\n        expanded: false,\n        position: { x: 0, y: 0 },\n        questions: [\n          '如何制定有效的时间计划？',\n          '怎样避免时间浪费？',\n          '如何平衡工作和生活？'\n        ],\n        urls: [],\n        children: [\n          {\n            id: 'pomodoro-technique',\n            title: '番茄工作法',\n            description: '25分钟专注工作，5分钟休息的时间管理方法',\n            level: 1,\n            expanded: false,\n            position: { x: -200, y: 100 },\n            questions: [\n              '番茄工作法的具体步骤是什么？',\n              '如何选择合适的番茄时长？'\n            ],\n            urls: [],\n            children: []\n          },\n          {\n            id: 'gtd-method',\n            title: 'GTD 方法',\n            description: 'Getting Things Done - 完整的任务管理系统',\n            level: 1,\n            expanded: false,\n            position: { x: 200, y: 100 },\n            questions: [\n              'GTD 的五个步骤是什么？',\n              '如何建立有效的收集系统？'\n            ],\n            urls: [],\n            children: []\n          }\n        ]\n      },\n      {\n        id: 'communication-skills',\n        title: '沟通技巧',\n        description: '职场沟通和协作技能',\n        level: 0,\n        expanded: false,\n        position: { x: 300, y: 0 },\n        questions: [\n          '如何进行有效的会议沟通？',\n          '怎样处理工作冲突？',\n          '如何提升演讲能力？'\n        ],\n        urls: [],\n        children: []\n      },\n      {\n        id: 'digital-tools',\n        title: '数字化工具',\n        description: '提升办公效率的软件和工具',\n        level: 0,\n        expanded: false,\n        position: { x: -300, y: 0 },\n        questions: [\n          '有哪些好用的办公软件？',\n          '如何选择合适的项目管理工具？',\n          '怎样实现文档协作？'\n        ],\n        urls: [],\n        children: []\n      }\n    ]\n  },\n  {\n    id: 'digital-marketing',\n    name: '数字营销',\n    description: '数字化时代的营销策略和方法',\n    domain: 'marketing',\n    version: 1,\n    isBuiltIn: true,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    rootNodes: [\n      {\n        id: 'content-marketing',\n        title: '内容营销',\n        description: '通过有价值的内容吸引和留住客户',\n        level: 0,\n        expanded: false,\n        position: { x: 0, y: 0 },\n        questions: [\n          '如何制定内容营销策略？',\n          '什么样的内容更容易传播？',\n          '如何衡量内容营销效果？'\n        ],\n        urls: [],\n        children: []\n      },\n      {\n        id: 'social-media-marketing',\n        title: '社交媒体营销',\n        description: '利用社交平台进行品牌推广',\n        level: 0,\n        expanded: false,\n        position: { x: 300, y: 0 },\n        questions: [\n          '如何选择合适的社交媒体平台？',\n          '怎样制作吸引人的社交媒体内容？',\n          '如何与粉丝互动？'\n        ],\n        urls: [],\n        children: []\n      },\n      {\n        id: 'seo-optimization',\n        title: 'SEO 优化',\n        description: '搜索引擎优化技术和策略',\n        level: 0,\n        expanded: false,\n        position: { x: -300, y: 0 },\n        questions: [\n          'SEO 的基本原理是什么？',\n          '如何进行关键词研究？',\n          '怎样优化网站结构？'\n        ],\n        urls: [],\n        children: []\n      }\n    ]\n  },\n  {\n    id: 'global-expansion',\n    name: '海外推广',\n    description: '企业国际化和海外市场拓展',\n    domain: 'international',\n    version: 1,\n    isBuiltIn: true,\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    rootNodes: [\n      {\n        id: 'market-research',\n        title: '市场调研',\n        description: '了解目标市场的需求和竞争环境',\n        level: 0,\n        expanded: false,\n        position: { x: 0, y: 0 },\n        questions: [\n          '如何分析海外市场机会？',\n          '怎样了解当地消费者习惯？',\n          '如何评估竞争对手？'\n        ],\n        urls: [],\n        children: []\n      },\n      {\n        id: 'localization',\n        title: '本地化策略',\n        description: '产品和服务的本地化适配',\n        level: 0,\n        expanded: false,\n        position: { x: 300, y: 0 },\n        questions: [\n          '如何进行文化适配？',\n          '怎样处理语言本地化？',\n          '如何适应当地法规？'\n        ],\n        urls: [],\n        children: []\n      },\n      {\n        id: 'cross-border-ecommerce',\n        title: '跨境电商',\n        description: '跨境电子商务运营策略',\n        level: 0,\n        expanded: false,\n        position: { x: -300, y: 0 },\n        questions: [\n          '如何选择跨境电商平台？',\n          '怎样处理国际物流？',\n          '如何管理汇率风险？'\n        ],\n        urls: [],\n        children: []\n      }\n    ]\n  }\n];\n\nexport const defaultSearchProviders = [\n  {\n    id: 'google',\n    name: 'Google',\n    icon: '🔍',\n    baseUrl: 'https://www.google.com/search',\n    searchParam: 'q',\n    enabled: true\n  },\n  {\n    id: 'bing',\n    name: 'Bing',\n    icon: '🔎',\n    baseUrl: 'https://www.bing.com/search',\n    searchParam: 'q',\n    enabled: false\n  },\n  {\n    id: 'baidu',\n    name: '百度',\n    icon: '🐻',\n    baseUrl: 'https://www.baidu.com/s',\n    searchParam: 'wd',\n    enabled: true\n  }\n];"],"names":[],"mappings":";;;;AAEO,MAAM,oBAA0C;IACrD;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,QAAQ;QACR,SAAS;QACT,WAAW;QACX,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW;YACT;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG;oBAAG,GAAG;gBAAE;gBACvB,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU;oBACR;wBACE,IAAI;wBACJ,OAAO;wBACP,aAAa;wBACb,OAAO;wBACP,UAAU;wBACV,UAAU;4BAAE,GAAG,CAAC;4BAAK,GAAG;wBAAI;wBAC5B,WAAW;4BACT;4BACA;yBACD;wBACD,MAAM,EAAE;wBACR,UAAU,EAAE;oBACd;oBACA;wBACE,IAAI;wBACJ,OAAO;wBACP,aAAa;wBACb,OAAO;wBACP,UAAU;wBACV,UAAU;4BAAE,GAAG;4BAAK,GAAG;wBAAI;wBAC3B,WAAW;4BACT;4BACA;yBACD;wBACD,MAAM,EAAE;wBACR,UAAU,EAAE;oBACd;iBACD;YACH;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG;oBAAK,GAAG;gBAAE;gBACzB,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU,EAAE;YACd;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG,CAAC;oBAAK,GAAG;gBAAE;gBAC1B,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU,EAAE;YACd;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,QAAQ;QACR,SAAS;QACT,WAAW;QACX,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW;YACT;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG;oBAAG,GAAG;gBAAE;gBACvB,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU,EAAE;YACd;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG;oBAAK,GAAG;gBAAE;gBACzB,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU,EAAE;YACd;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG,CAAC;oBAAK,GAAG;gBAAE;gBAC1B,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU,EAAE;YACd;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,QAAQ;QACR,SAAS;QACT,WAAW;QACX,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW;YACT;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG;oBAAG,GAAG;gBAAE;gBACvB,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU,EAAE;YACd;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG;oBAAK,GAAG;gBAAE;gBACzB,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU,EAAE;YACd;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,OAAO;gBACP,UAAU;gBACV,UAAU;oBAAE,GAAG,CAAC;oBAAK,GAAG;gBAAE;gBAC1B,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,MAAM,EAAE;gBACR,UAAU,EAAE;YACd;SACD;IACH;CACD;AAEM,MAAM,yBAAyB;IACpC;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,SAAS;QACT,aAAa;QACb,SAAS;IACX;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,SAAS;QACT,aAAa;QACb,SAAS;IACX;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,SAAS;QACT,aAAa;QACb,SAAS;IACX;CACD","debugId":null}},
    {"offset": {"line": 3948, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/data/sampleMemories.ts"],"sourcesContent":["import { Memory } from '@my-platform/memory';\n\nexport const sampleMemories: Memory[] = [\n  {\n    id: 'memory_1',\n    userId: 'user1',\n    title: '春日樱花盛开',\n    content: '今天和朋友们一起去公园赏樱花，樱花开得正盛，粉色的花瓣在微风中飘落，就像下雪一样美丽。我们在樱花树下野餐，聊天，拍照，度过了愉快的一天。',\n    date: new Date('2024-04-15'),\n    location: '中山公园',\n    people: ['小明', '小红', '小李'],\n    tags: ['春天', '樱花', '野餐', '朋友'],\n    emotions: ['快乐', '放松', '美好'],\n    visibility: 'private',\n    createdAt: new Date('2024-04-15'),\n    updatedAt: new Date('2024-04-15')\n  },\n  {\n    id: 'memory_2',\n    userId: 'user1',\n    title: '毕业典礼',\n    content: '大学毕业典礼，穿着学士服和同学们一起拍照留念。四年的大学时光即将结束，心情既兴奋又不舍。感谢所有帮助过我的老师和同学们。',\n    date: new Date('2023-06-20'),\n    location: '大学礼堂',\n    people: ['室友们', '导师', '同班同学'],\n    tags: ['毕业', '大学', '成长', '友谊'],\n    emotions: ['兴奋', '不舍', '感激'],\n    aiGenerated: true,\n    visibility: 'shared',\n    createdAt: new Date('2023-06-20'),\n    updatedAt: new Date('2023-06-20')\n  },\n  {\n    id: 'memory_3',\n    userId: 'user1',\n    title: '第一次做饭',\n    content: '今天第一次尝试做红烧肉，虽然过程有些手忙脚乱，但最终成品还不错。妈妈在视频通话中指导我，感觉很温馨。',\n    date: new Date('2024-01-10'),\n    location: '家里厨房',\n    people: ['妈妈'],\n    tags: ['做饭', '学习', '家庭', '成长'],\n    emotions: ['紧张', '成就感', '温馨'],\n    audioUrl: '/audio/cooking-session.mp3',\n    visibility: 'private',\n    createdAt: new Date('2024-01-10'),\n    updatedAt: new Date('2024-01-10')\n  },\n  {\n    id: 'memory_4',\n    userId: 'user1',\n    title: '海边日落',\n    content: '在海边看日落，夕阳西下，天空被染成了橙红色。海浪轻拍着沙滩，海鸥在空中飞翔。这一刻感觉时间都静止了，内心无比平静。',\n    date: new Date('2024-07-22'),\n    location: '青岛海滩',\n    people: [],\n    tags: ['海边', '日落', '自然', '独处'],\n    emotions: ['平静', '美好', '感动'],\n    visibility: 'public',\n    createdAt: new Date('2024-07-22'),\n    updatedAt: new Date('2024-07-22')\n  },\n  {\n    id: 'memory_5',\n    userId: 'user1',\n    title: '生日聚会',\n    content: '朋友们为我准备了惊喜生日聚会，蛋糕、礼物、祝福，一切都让我感动不已。这些朋友真的很珍贵，感谢有他们陪伴。',\n    date: new Date('2024-03-08'),\n    location: '朋友家',\n    people: ['小王', '小张', '小刘', '小陈'],\n    tags: ['生日', '聚会', '友谊', '惊喜'],\n    emotions: ['感动', '快乐', '感激'],\n    visibility: 'private',\n    createdAt: new Date('2024-03-08'),\n    updatedAt: new Date('2024-03-08')\n  }\n];"],"names":[],"mappings":";;;AAEO,MAAM,iBAA2B;IACtC;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,MAAM,IAAI,KAAK;QACf,UAAU;QACV,QAAQ;YAAC;YAAM;YAAM;SAAK;QAC1B,MAAM;YAAC;YAAM;YAAM;YAAM;SAAK;QAC9B,UAAU;YAAC;YAAM;YAAM;SAAK;QAC5B,YAAY;QACZ,WAAW,IAAI,KAAK;QACpB,WAAW,IAAI,KAAK;IACtB;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,MAAM,IAAI,KAAK;QACf,UAAU;QACV,QAAQ;YAAC;YAAO;YAAM;SAAO;QAC7B,MAAM;YAAC;YAAM;YAAM;YAAM;SAAK;QAC9B,UAAU;YAAC;YAAM;YAAM;SAAK;QAC5B,aAAa;QACb,YAAY;QACZ,WAAW,IAAI,KAAK;QACpB,WAAW,IAAI,KAAK;IACtB;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,MAAM,IAAI,KAAK;QACf,UAAU;QACV,QAAQ;YAAC;SAAK;QACd,MAAM;YAAC;YAAM;YAAM;YAAM;SAAK;QAC9B,UAAU;YAAC;YAAM;YAAO;SAAK;QAC7B,UAAU;QACV,YAAY;QACZ,WAAW,IAAI,KAAK;QACpB,WAAW,IAAI,KAAK;IACtB;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,MAAM,IAAI,KAAK;QACf,UAAU;QACV,QAAQ,EAAE;QACV,MAAM;YAAC;YAAM;YAAM;YAAM;SAAK;QAC9B,UAAU;YAAC;YAAM;YAAM;SAAK;QAC5B,YAAY;QACZ,WAAW,IAAI,KAAK;QACpB,WAAW,IAAI,KAAK;IACtB;IACA;QACE,IAAI;QACJ,QAAQ;QACR,OAAO;QACP,SAAS;QACT,MAAM,IAAI,KAAK;QACf,UAAU;QACV,QAAQ;YAAC;YAAM;YAAM;YAAM;SAAK;QAChC,MAAM;YAAC;YAAM;YAAM;YAAM;SAAK;QAC9B,UAAU;YAAC;YAAM;YAAM;SAAK;QAC5B,YAAY;QACZ,WAAW,IAAI,KAAK;QACpB,WAAW,IAAI,KAAK;IACtB;CACD","debugId":null}},
    {"offset": {"line": 4094, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/lib/initializeMemories.ts"],"sourcesContent":["import { sampleMemories } from '../data/sampleMemories';\n\nexport async function initializeMemories() {\n  try {\n    // 检查是否在 Tauri 环境中\n    if (typeof window === 'undefined' || !window.__TAURI__) {\n      console.log('Not in Tauri environment, skipping memory initialization');\n      return;\n    }\n\n    const { invoke } = await import('@tauri-apps/api/core');\n\n    // 检查是否已有记忆数据\n    const existingMemories = await invoke('get_memories', { filter: null });\n\n    if (Array.isArray(existingMemories) && existingMemories.length > 0) {\n      console.log('Memories already exist, skipping initialization');\n      return;\n    }\n\n    // 创建示例记忆\n    console.log('Initializing sample memories...');\n\n    for (const memory of sampleMemories) {\n      const request = {\n        title: memory.title,\n        content: memory.content,\n        date: memory.date,\n        location: memory.location,\n        people: memory.people,\n        tags: memory.tags,\n        emotions: memory.emotions,\n        visibility: memory.visibility,\n      };\n\n      await invoke('create_memory', { request });\n    }\n\n    console.log('Sample memories initialized successfully');\n  } catch (error) {\n    console.error('Failed to initialize memories:', error);\n  }\n}\n"],"names":[],"mappings":";;;AAAA;;AAEO,eAAe;IACpB,IAAI;QACF,kBAAkB;QAClB,IAAI,aAAkB,eAAe,CAAC,OAAO,SAAS,EAAE;YACtD,QAAQ,GAAG,CAAC;YACZ;QACF;QAEA,MAAM,EAAE,MAAM,EAAE,GAAG;QAEnB,aAAa;QACb,MAAM,mBAAmB,MAAM,OAAO,gBAAgB;YAAE,QAAQ;QAAK;QAErE,IAAI,MAAM,OAAO,CAAC,qBAAqB,iBAAiB,MAAM,GAAG,GAAG;YAClE,QAAQ,GAAG,CAAC;YACZ;QACF;QAEA,SAAS;QACT,QAAQ,GAAG,CAAC;QAEZ,KAAK,MAAM,UAAU,mJAAA,CAAA,iBAAc,CAAE;YACnC,MAAM,UAAU;gBACd,OAAO,OAAO,KAAK;gBACnB,SAAS,OAAO,OAAO;gBACvB,MAAM,OAAO,IAAI;gBACjB,UAAU,OAAO,QAAQ;gBACzB,QAAQ,OAAO,MAAM;gBACrB,MAAM,OAAO,IAAI;gBACjB,UAAU,OAAO,QAAQ;gBACzB,YAAY,OAAO,UAAU;YAC/B;YAEA,MAAM,OAAO,iBAAiB;gBAAE;YAAQ;QAC1C;QAEA,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;IAClD;AACF","debugId":null}},
    {"offset": {"line": 4146, "column": 0}, "map": {"version":3,"sources":["file:///Users/cavatina/projects/aicooper/apps/desktop/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  AppShell,\n  Text,\n  NavLink,\n  Group,\n  Title,\n  Badge,\n  Box,\n  Stack,\n  Divider\n} from '@mantine/core';\nimport {\n  IconMessageCircle,\n  IconBrain,\n  IconTemplate,\n  IconKey,\n  IconSettings,\n  IconUser,\n  IconRobot,\n  IconRoute,\n  IconPhoto\n} from '@tabler/icons-react';\nimport { ApiKeyManager } from \"@/components/ApiKeyManager\";\nimport { SettingsManager } from \"@/components/SettingsManager\";\nimport { ChatInterface } from \"@/components/ChatInterface\";\nimport { ProfileManager } from \"@/components/ProfileManager\";\nimport { KnowledgeFrameworkManager } from \"@my-platform/ai-knowledge\";\nimport { FlowDesignManager } from \"@my-platform/flow-design\";\nimport { PromptTemplateManager } from \"@my-platform/prompt-templates\";\nimport { MemoryManager } from \"@my-platform/memory\";\nimport { initializeMemories } from \"@/lib/initializeMemories\";\n\ntype ActiveTab = 'chat' | 'knowledge' | 'templates' | 'flows' | 'memory' | 'apikeys' | 'settings' | 'profile';\n\nexport default function Home() {\n  const [activeTab, setActiveTab] = useState<ActiveTab>('chat');\n\n  // 初始化示例数据\n  useEffect(() => {\n    initializeMemories();\n  }, []);\n\n  const tabs = [\n    { id: 'chat' as const, label: '聊天', icon: IconMessageCircle, color: 'blue' },\n    { id: 'knowledge' as const, label: '知识', icon: IconBrain, color: 'violet' },\n    { id: 'templates' as const, label: '模板', icon: IconTemplate, color: 'green' },\n    { id: 'flows' as const, label: '流程', icon: IconRoute, color: 'teal' },\n    { id: 'memory' as const, label: '记忆', icon: IconPhoto, color: 'indigo' },\n    { id: 'apikeys' as const, label: '密钥', icon: IconKey, color: 'orange' },\n    { id: 'settings' as const, label: '设置', icon: IconSettings, color: 'gray' },\n    { id: 'profile' as const, label: '资料', icon: IconUser, color: 'pink' },\n  ];\n\n  const renderContent = () => {\n    switch (activeTab) {\n      case 'chat':\n        return <ChatInterface />;\n      case 'knowledge':\n        return <KnowledgeFrameworkManager />;\n      case 'templates':\n        return <PromptTemplateManager />;\n      case 'flows':\n        return <FlowDesignManager />;\n      case 'memory':\n        return <MemoryManager />;\n      case 'apikeys':\n        return <ApiKeyManager />;\n      case 'settings':\n        return <SettingsManager />;\n      case 'profile':\n        return <ProfileManager />;\n      default:\n        return <ChatInterface />;\n    }\n  };\n\n  return (\n    <AppShell\n      header={{ height: 60 }}\n      navbar={{ width: 140, breakpoint: 'sm' }}\n      padding={0}\n    >\n      <AppShell.Header>\n        <Group h=\"100%\" px=\"md\" justify=\"space-between\">\n          <Group>\n            <IconRobot size={28} color=\"#228be6\" />\n            <Title order={3} c=\"dark\">AI Desktop</Title>\n          </Group>\n          <Badge variant=\"light\" color=\"blue\" size=\"sm\">\n            v0.2.0\n          </Badge>\n        </Group>\n      </AppShell.Header>\n\n      <AppShell.Navbar p=\"sm\" className=\"sidebar-nav\">\n        <Stack gap=\"xs\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <NavLink\n                key={tab.id}\n                active={activeTab === tab.id}\n                label={\n                  <Text size=\"xs\" fw={500}>\n                    {tab.label}\n                  </Text>\n                }\n                leftSection={<Icon size={18} />}\n                onClick={() => setActiveTab(tab.id)}\n                variant=\"filled\"\n                color={tab.color}\n                style={{\n                  borderRadius: '6px',\n                  minHeight: '36px',\n                  padding: '6px 8px',\n                }}\n              />\n            );\n          })}\n\n          <Box mt=\"auto\" pt=\"md\">\n            <Text size=\"xs\" c=\"dimmed\" ta=\"center\">\n              AI Desktop\n            </Text>\n          </Box>\n        </Stack>\n      </AppShell.Navbar>\n\n      <AppShell.Main className=\"content-area\">\n        {renderContent()}\n      </AppShell.Main>\n    </AppShell>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}