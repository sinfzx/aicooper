## Feature: IdeaVerify（AI 创意验证与可行性提升）需求说明

### 1. 产品目标与范围

- 面向创业者/研究者，提供一套“AI 协作的创意验证与可行性提升工具”。
- 利用公开社区（如 Reddit/贴吧/HN/PH 等）的用户讨论与反馈，抽取“痛点/机会/需求”，对“已有产品或全新创意”进行多维度评级与改进建议。
- 输出可被个人私有使用或以“需求广场”形式部分公开，促进协作、撮合与后续增长。

### 2. 目标用户与核心使用场景

- 目标用户：
  - 创业者/产品经理：验证赛道与创意、对比竞品、制定 MVP/迭代计划。
  - 研究者/投资分析：洞察趋势、评估可行性与商业潜力。
- 核心场景：
  - 录入一个“已有产品”（或若干链接）→ 抽取用户评论 → 归因问题 → 结构化痛点 → 生成迭代建议/定位与定价建议。
  - 输入一个“全新创意”→ 以系统问题库+社区搜索 → 自动探索可验证证据与反例 → 多维评级与风险提示。

### 3. 创意管理与信息来源

- 创意卡（Idea）：
  - 基本信息：名称、描述、类别（实体/软件）、阶段（想法/MVP/在售）、目标用户、核心价值主张。
  - 相关链接：官网、文档、教程、帖子链接（支持批量导入）。
  - 媒体：可选截图（来源评论/官网片段）。
- 信息来源（Source）：
  - 用户手动提供帖子 URL（如 `https://www.reddit.com/...`）。
  - 系统问题库（查询模板，如“is there any tool/app for …”）自动搜索近 90 天帖。
  - 可扩展来源：Hacker News、Product Hunt、Twitter/X、贴吧、应用商店评论。
  - 合规策略：严格遵从各平台 ToS；仅保留“引用与摘要、结构化指标”，不镜像全部内容；尊重隐私与撤稿请求。

### 4. 多维评级机制（评分+证据+置信度）

- 评级维度（示例权重，可调整）：
  - 市场痛点强度（20%）：需求强度/痛感、提及频次、情绪强度（负向为痛点）。
  - 竞争强度（15%）：替代品数量、头部集中度、差异化空间。
  - 技术可行性（15%）：实现复杂度、依赖外部稳定能力、规模化难度。
  - 商业可行性（15%）：付费意愿/价格弹性、商业模式清澈度、毛利/成本结构。
  - 增长潜力（10%）：可获客渠道、口碑传播性、UGC 驱动。
  - 合规与风险（10%）：数据/隐私/版权/平台政策风险。
  - 护城河潜力（10%）：数据壁垒、网络效应、生态位、集成成本。
  - 执行难度（5%）：团队门槛、路径依赖、关键资源可得性。
- 输出：
  - 每维度 0–100 分，总分按权重加权；为每维度附“证据摘录/来源链接与时间戳”。
  - 置信度（0–1）：基于数据覆盖度、来源多样性、文本一致性（如同主题聚类一致度）。
  - 可视化：雷达图/条形图；证据折叠面板。

### 5. 分析流水线（AI 协作）

- 流水线阶段：
  1. 抓取/导入：URL 抽取正文与评论（仅公开页），或由用户上传片段。
  2. 清洗去噪：去重、去引用链、语言检测、脱敏。
  3. 主题聚类：按主题/场景聚类（HDBSCAN/K-means + LLM 校正），形成“需求簇”。
  4. 情绪与痛点抽取：针对每簇提炼“诉求/痛点/期望/疑虑/对比点/替代方案”。
  5. 结构化生成：生成“需求卡”（标签、痛点陈述、用户画像线索、典型引述、相关链接）。
  6. 竞争对照：同类产品/替代品提取功能对比表、定位图（价格-价值/专业度-易用度等）。
  7. 第一性原理推理：面向虚拟/真实画像（多画像），对“效率/成本/差异化/细分场景/长期路线”提出推演与约束条件。
  8. 评级与建议：多维评分、关键阻断点、MVP 提案、下一步实验（最小验证）。
- 可选：时间序列趋势（主题漂移/提及量曲线）、法规新闻脉络。

### 6. 模块与功能

- 创意管理：创建/导入；链接收集；截图辅助；分类（实体/软件）。
- 用户需求管理：
  - 需求列表（按痛点强度/最近提及/聚类簇排序）。
  - 需求细分（疑虑/关注点/对比/形态标签）。
  - 第一性原理推理（多画像推演与对比）。
  - 趋势分析（技术/文化/消费/法规）。
  - 迭代方案（功能点/营销重点/定价建议）。
- 用户画像：
  - 基于单个 Reddit 用户历史评论（或上传），构建“画像卡”，并进行“虚拟访谈脚本”。
  - 画像细分与目标用户探索（寻找新增目标用户群）。
- 竞品管理：
  - 多种替代方案归类；功能差异矩阵；定位图；优缺点与证据引用。
- 需求广场：
  - 基于帖子挖掘的“需求卡”可发布到广场，支持浏览、点赞/投票、收藏、讨论。
  - 可选择私有/团队可见/公开（默认私有，公开需二次确认）。
- v2 增强：
  - 需求买断/悬赏（与钱包连接，如 MetaMask），交易与分润规则（仅做占位设计）。
  - MCP/插件分发：将“需求卡/画像/评级”发布到外部 UI 客户端。
    ￼- 增长管理：社区地图（sub/贴吧/KOL）、内容规划、SEO 与“权威发布优化（AIEO）”。

### 7. 架构与落地（对齐现有 Monorepo）

- 目录：`features/ideaverify`（与 memory 同级），提供复用组件与 hooks；App/Api 端复用。
- API（tRPC 11）：
  - 仅为“需求广场”（Square）提供服务端能力（发布/浏览/投票/讨论）；
  - 用户本地发掘的需求卡默认“只保存在桌面端”，用户可选择是否提交到“需求广场”；
  - AI 相关调用一律不经服务器中转（桌面端直连第三方），服务端不提供任何 AI 生成接口；
  - 路由建议：`apps/api/src/server/api/routers/ideaverify.ts`（仅 Square 相关），统一 `protectedProcedure` 与 Zod 校验；
  - 服务端仅存“结构化结果（必要字段）与来源元数据”，不存大段原文与任何媒体二进制。
- 数据库（Prisma 6）：
  - 核心模型（概念）：
    - `Idea`（创意/产品）
    - `Source`（来源链接/平台/抓取时间/摘要哈希）
    - `Demand`（需求卡：主题、痛点、标签、关联 Idea/Source）
    - `Cluster`（需求簇/主题聚类）
    - `Rating`（多维评分：维度、权重、分值、置信度、证据）
    - `Persona`（用户画像/虚拟访谈）
    - `Competitor`（竞品/替代品/对比条目）
    - `Trend`（主题/指标/时间序列点）
    - `SquarePost`（需求广场发布项）
- 前端（Next.js + Mantine）：
  - 场景：创意管理页、需求发掘面板、评分仪表盘、竞品/趋势页、广场页。
  - 表单：创意录入（支持批量 URL）；导入/抓取进度与失败重试；结构化结果预览与修订。
- AI/提示词与工作流：
  - `features/ideaverify/src/prompts` 存模板；本地注入用户参数（行业、目标市场、预算、团队能力）。
  - LLM 链：摘要 → 聚类标签建议 → 情绪/痛点抽取 → 维度评分 → 第一性推理 → 建议合成。
  - 透明化：所有结论附“引用片段+链接+时间”。
- 桌面/服务边界：
  - 桌面端优先：抓取/清洗/聚类/抽取/评分与报告生成均在本地执行；
  - 服务端职责限定为：需求广场（可选上行的需求卡元数据）、鉴权与基础协作能力；
  - 与 memory 一致：媒体与敏感内容不入库，AI 服务调用直连第三方，不经服务端。

### 8. 输入与校验

- Idea 创建：名称(必)、类别(必)、描述(<=1k)、阶段、目标用户、链接列表（URL Zod 校验）。
- Source 导入：URL(必)、平台枚举、抓取策略（仅公开内容）；失败重试与速率限制。
- 结构化结果：标签集合（枚举+可扩展）、分数 0–100、置信度 0–1；引用不得包含隐私数据。

### 9. 权限与协作

- 默认私有；支持成员邀请（只读/编辑）；公开需二次确认与审计日志。
- 需求广场发帖：可选择匿名或带昵称；支持举报/下架流程。

### 10. 合规与伦理

- 平台 ToS 合规：不抓取/存储受限内容；不持久化用户隐私；仅保存结构化摘要与必要引用。
- 版权与出处：标注引用来源与时间；支持来源撤销/屏蔽；提供导出时的引用清单。
- 偏见与透明：提示 “AI 生成/辅助”，展示不确定性与置信度范围。

### 11. 质量与验收

- 准确性：
  - 聚类主题一致性（≥0.6）；情绪识别准确率（抽检 ≥80%）。
  - 报告可复查（所有结论可追溯引用）。
- 性能：常规查询 < 300ms；抓取/分析异步队列，支持进度与重试。
- 安全：tRPC 全部鉴权；所有输入 Zod 校验；速率限制与审计。

### 12. 路线图 / 里程碑

- MVP（M1）
  - 创意管理与来源导入（Reddit/链接）；基础抓取 → 结构化；需求卡列表；一级评分（市场痛点/竞争强度/可行性）；报告导出。
- v1（M2）
  - 主题聚类与趋势；第一性推理（多画像）；竞品对比与定位图；需求广场（浏览/发布/投票）。
- v2（M3）
  - 需求买断/悬赏（钱包接入占位）；增长管理（社区/KOL/内容/SEO）；AIEO 权威发布优化。

### 13. 数据模型草案（概念级）

- Idea(id, userId, name, category, stage, description, targetUsers[], links[], createdAt, updatedAt)
- Source(id, ideaId, platform, url, snapshotHash, title, capturedAt)
- Demand(id, ideaId, clusterId, title, painPoint, tags[], quotes[], sources[], priority, createdAt)
- Cluster(id, ideaId, label, keywords[], cohesion, size)
- Rating(id, ideaId, dimension, score, weight, confidence, evidence[], createdAt)
- Persona(id, ideaId, name, traits[], jobsToBeDone[], interviewScript)
- Competitor(id, ideaId, name, links[], pros[], cons[], price, position)
- Trend(id, ideaId, topic, timepoint, value, unit)
- SquarePost(id, demandId, visibility, upvotes, commentsCount, createdAt)

---

提示：

- 技术落地沿用本仓库规范：tRPC + Prisma，`features/ideaverify` 输出复用组件与 hooks；桌面端可承担抓取/清洗的重任务，服务端仅存元数据与报告结构化结果。
- 评分机制建议先以“可解释的规则+LLM 辅助”落地，后续再引入统计回归/对比实验做权重校准与置信度学习。
